{"version":3,"sources":["webpack:///./demo/components/FormField/index.js","webpack:///./src/panels/DesignPanel/WidgetDropAccepter.js","webpack:///./demo/components/Form/FormContext.js","webpack:///./demo/components/Icon/index.js","webpack:///./demo/components/HTMLForm/SingleCheck.js","webpack:///./demo/index.js","webpack:///./src/index.js","webpack:///./src/Designer.js","webpack:///./src/DesignModel/index.js","webpack:///./src/DesignModel/Widget/index.js","webpack:///./src/DesignModel/Widget/Preview.js","webpack:///./src/DesignModel/Widget/DragPreview.js","webpack:///./src/DesignModel/Widget/PlaceholderPreview.js","webpack:///./src/DesignModel/Widget/WidgetProperty.js","webpack:///./src/DesignContext.js","webpack:///./demo/components/Form/index.js","webpack:///./src/panels/WidgetsPanel/index.js","webpack:///./src/panels/WidgetsPanel/WidgetItem.js","webpack:///./src/panels/PropertyPanel.js","webpack:///./src/panels/DesignPanel/index.js","webpack:///./src/panels/DesignPanel/PreviewItem.js","webpack:///./demo/widgets/index.js","webpack:///./demo/widgets/TextField/index.js","webpack:///./demo/utils/index.js","webpack:///./demo/widgets/TextField/PropertyPanel.js","webpack:///./demo/components/Form/Form.js","webpack:///./demo/components/Form/FormItem.js","webpack:///./demo/components/Form/NativeField.js","webpack:///./demo/components/FormField/MultipleInputField.js","webpack:///./demo/components/FormField/DisplayField.js","webpack:///./demo/components/FormField/WidthInputField.js","webpack:///./demo/widgets/TextField/icon.png","webpack:///./demo/widgets/TextareaField/index.js","webpack:///./demo/widgets/TextareaField/PropertyPanel.js","webpack:///./demo/widgets/TextareaField/icon.png","webpack:///./demo/widgets/SelectField/index.js","webpack:///./demo/widgets/SelectField/PropertyPanel.js","webpack:///./demo/widgets/SelectField/icon.png","webpack:///./demo/widgets/URLField/index.js","webpack:///./demo/widgets/URLField/PropertyPanel.js","webpack:///./demo/widgets/URLField/icon.png","webpack:///./demo/widgets/DetailedField/index.js","webpack:///./demo/widgets/DetailedField/PropertyPanel.js","webpack:///./demo/widgets/DetailedField/Preview.js","webpack:///./demo/widgets/DetailedField/icon.png","webpack:///./src/style/index.js","webpack:///./demo/widgets/common/data.js","webpack:///./demo/widgets/PropertyForm.js","webpack:///./demo/widgets/common/CommonPropertyPanel.js","webpack:///./demo/widgets/common/ValidatePropertyPanel.js","webpack:///./src/constants.js"],"names":["__webpack_require__","_MultipleInputField","_interopRequireDefault","_DisplayField","_WidthInputField","_react","_reactDnd","_classnames","_constants","_DesignContext","_PreviewItem","spec","canDrop","props","monitor","getItem","isWidgetDragging","drop","component","didDrop","dragItem","designer","context","console","log","pid","addItem","item","WidgetDropAccepter","i","_this","xtype","widget","getWidget","default","createElement","key","fieldId","this","PlaceholderPreview","_this$props","connectDropTarget","isOver","items","className","design-layout-container","drag-over","dropable","map","renderItem","rendrePlaceholder","React","Component","DesignContext","DropTarget","WIDGET_DRAG_DROP_SCOPE","connect","dropTarget","shallow","createContext","_extends2","type","checked","value","on","onChange","e","target","off","_reactDom","_src","_widgets","ReactDOM","render","_React$useState","useState","_React$useState2","_slicedToArray2","metadata","onMetadataChange","style","margin","width","minHeight","widgets","document","getElementById","_reactDndHtml5Backend","_Designer","DragDropContext","HTML5Backend","Designer","_propTypes","_DesignModel","_WidgetsPanel","_PropertyPanel","_DesignPanel","_objectSpread2","_this$props2","platform","handleModelChange","PropTypes","array","oneOf","P_PC","P_MOBILE","P_IPAD","object","_Widget","_find","_findIndex","DesignModel","widgetsMap","activeId","state","concat","setState","arguments","length","undefined","getAllItems","filter","$pid","_toConsumableArray2","idx","getItemIndex","push","ret","oIdx","splice","bItem","bind","getWidgets","setActiveId","getActiveId","getActiveItem","updateItem","getItems","removeItem","insertBefore","insertAfter","children","Provider","getModel","w","Widget","_reactIs","_Preview","_DragPreview","_PlaceholderPreview","_WidgetProperty","options","_classCallCheck2","$$widget","title","icon","Preview","isValidElementType","WPreview","DragPreview","WDragPreview","WPlaceholderPreview","WidgetProperty","WWidgetProperty","data","name","classString","_defineProperty2","widget-preview-item-inner","placeholder","_ref","_Form","_FormItem","_NativeField","Form","Item","FormItem","NativeField","_WidgetItem","WidgetsPanel","WidgetItem","disabled","connectDragSource","isDragging","_widget$title","widget-item","widget-item-dragging","widget-item-disabled","src","DragSource","beginDrag","dragSource","PropertyPanel","activeItem","padding","textAlign","onItemChange","_WidgetDropAccepter","DesignPanel","_flow","_get","dropSpec","hover","placeholderPosition","dragItemFieldId","isSortMode","dragOffset","getClientOffset","previewDOM","findDOMNode","targetOffset","querySelector","getBoundingClientRect","middleY","bottom","height","y","pos","_dropTarget","id","dropId","dropPos","WidgetPreviewItem","widget-preview-item-wrapper","droppable","dragging","ref","widget-preview-item","widget-preview-item-selected","onClick","handlePreviewClick","handleRemove","isPreviewDragging","_TextField","_TextareaField","_SelectField","_URLField","_DetailedField","TextField","TextareaField","SelectField","URLField","DetailedField","_data2","_icon","Math","random","toString","slice","_PropertyForm","_CommonPropertyPanel","_ValidatePropertyPanel","_asyncValidator","_set","_scrollIntoView","_FormContext","AsyncValidator","warning","formError","validatingFields","formValue","formDefaultValue","field","fields","indexOf","path2obj","event","cb","nextFormValue","_objectSpread5","_valiateCb","validateProcess","forEach","errors","fieldRules","fieldProps","rules","validator","_isArray","required","unshift","apply","_this2","_this$state","getValue","getFieldRules","descriptor","validate","firstFields","message","Function","callback","_this3","_keys","error","_this4","f","getDOM","set","form","prefixCls","onSubmit","getFormContext","nextProps","prevState","string","bool","validateDelay","number","validateTrigger","node","oneOfType","func","labelWidth","labelPosition","alignItems","inline","validateFieldsAndScroll","showMessage","getFormItemInputProps","_classnames2","dom","_dom","addField","removeField","isRequired","some","rule","getValidateTrigger","getValidateDelay","_validateTimer","clearTimeout","setTimeout","validateField","setValue","formProps","normalize","label","labelFor","help","_this$getLabelProps","getLabelProps","getError","validating","isValidatingField","Children","only","_children$props","onBlur","getInputProps","onFieldChange","onFieldBlur","InputComponent","cloneElement","saveDOM","htmlFor","FormContext","_props$component","inputRef","others","_objectWithoutProperties2","_Icon","MultipleInputField","defaultValue","sIndex","_assertThisInitialized2","onAddItem","onRemoveItem","index","text","max","getUnit","test","toValue","_parseFloat2","isNaN","WidthInputField","_getPrototypeOf2","_len","a","Array","_key","_possibleConstructorReturn2","_getPrototypeOf3","call","unit","min","v","onUnitChange","handleInputChange","renderSuffix","module","exports","_FormField","XType","widget-preview-item-detailed","_utils","uuid","fieldName","dataType","dataLength","DisplayField","_SingleCheck"],"mappings":"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","file":"js/index.0937ec30.chunk.js","sourcesContent":["import \"./style/index.scss\"\r\n\r\nimport MultipleInputField from './MultipleInputField';\r\nimport DisplayField from './DisplayField';\r\nimport WidthInputField from './WidthInputField';\r\n\r\nexport {\r\n    MultipleInputField,\r\n    DisplayField,\r\n    WidthInputField,\r\n}","import React from 'react';\r\nimport {\r\n    DragSource,\r\n    DropTarget,\r\n} from 'react-dnd';\r\nimport cx from 'classnames';\r\nimport {\r\n    WIDGET_DRAG_DROP_SCOPE\r\n} from '../../constants';\r\nimport DesignContext from '../../DesignContext';\r\n\r\nimport PreviewItem from './PreviewItem';\r\n\r\nconst spec = {\r\n    canDrop(props, monitor) {\r\n        const dragItem = monitor.getItem();\r\n        return dragItem.isWidgetDragging;\r\n        // return isWidget(item);\r\n    },\r\n    // hover(props, monitor, component) {\r\n    //     const isOver = monitor.isOver({ shallow: true });\r\n    //     if (isOver) {\r\n    //         console.log('WidgetDropAccepter over...')\r\n    //     }\r\n    // },\r\n    drop(props, monitor, component) {\r\n        if (monitor.didDrop()) {\r\n            // console.log('widget has did drop')\r\n            return;\r\n        }\r\n        const dragItem = monitor.getItem();\r\n        const designer = component.context;\r\n        console.log(props.pid)\r\n        designer.addItem(dragItem.item, props.pid);\r\n    }\r\n};\r\n\r\nconst collect = (connect, monitor) => {\r\n    return {\r\n        connectDropTarget: connect.dropTarget(),\r\n        isOver: monitor.isOver({ shallow: true }),\r\n        canDrop: monitor.canDrop(),\r\n        dragItem: monitor.getItem(),\r\n    }\r\n}\r\n\r\nclass WidgetDropAccepter extends React.Component {\r\n\r\n    static contextType = DesignContext;\r\n\r\n    static defaultProps = {\r\n        pid: null,\r\n    }\r\n\r\n    rendrePlaceholder() {\r\n        const { dragItem } = this.props;\r\n        const { widget, item } = dragItem\r\n\r\n        return (\r\n            <widget.PlaceholderPreview widget={widget} item={item} />\r\n        );\r\n    }\r\n\r\n    renderItem = (item, i) => {\r\n        const designer = this.context;\r\n        const xtype = item.xtype;\r\n        const widget = designer.getWidget(xtype);\r\n\r\n        return <PreviewItem key={item.fieldId} widget={widget} item={item} />\r\n    }\r\n\r\n    render() {\r\n        const { connectDropTarget, isOver, canDrop, dragItem, items } = this.props;\r\n        // const designer = this.context;\r\n        // const items = designer.getItems(pid);\r\n\r\n        return connectDropTarget(\r\n            <div className={cx({\r\n                \"design-layout-container\": true,\r\n                \"drag-over\": isOver,\r\n                \"dropable\": canDrop,\r\n            })}>\r\n                {\r\n                    items.map(this.renderItem)\r\n                }\r\n                {\r\n                    isOver && dragItem.isWidgetDragging ? this.rendrePlaceholder() : null\r\n                }\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nexport default DropTarget(WIDGET_DRAG_DROP_SCOPE, spec, collect)(WidgetDropAccepter);","import React from 'react';\r\n\r\nexport default React.createContext({});\r\n","import React from 'react';\r\nimport classNames from 'classnames';\r\n\r\nexport default (props) => {\r\n\r\n    return <span {...props} className={\r\n        classNames(props.className, 'icon-' + props.type)\r\n    } />\r\n}","import React from 'react';\r\nimport { FormItem, NativeField } from '../Form'\r\nimport classNames from 'classnames';\r\n\r\nexport default function Checkbox(props) {\r\n\r\n    const onChange = (e) => {\r\n        const target = e.target;\r\n        if (target.checked) {\r\n            props.onChange && props.onChange(props.on);\r\n        } else {\r\n            props.onChange && props.onChange(props.off);\r\n        }\r\n    }\r\n\r\n\r\n    return (\r\n        <input\r\n            {...props}\r\n            checked={props.value === props.on}\r\n            type=\"checkbox\"\r\n            onChange={onChange}\r\n        />\r\n    );\r\n}","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\n\r\nimport FormDesigner from '../src';\r\n\r\nimport widgets from './widgets';\r\n\r\nimport '../src/style';\r\n\r\nfunction App() {\r\n    const [metadata, onMetadataChange] = React.useState({\r\n        items: []\r\n    })\r\n\r\n    return (\r\n        <div style={{\r\n            margin: \"30px auto\",\r\n            width: 1400,\r\n            minHeight: 500\r\n        }}>\r\n            <FormDesigner\r\n                widgets={widgets}\r\n                metadata={metadata}\r\n                onChange={onMetadataChange}\r\n            />\r\n        </div>\r\n    );\r\n}\r\n\r\nReactDOM.render(<App />, document.getElementById('root'))","import { DragDropContext } from 'react-dnd'\r\nimport HTML5Backend from 'react-dnd-html5-backend'\r\nimport Designer from './Designer';\r\n\r\nexport default DragDropContext(HTML5Backend)(Designer);","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\n\r\nimport DesignModel from './DesignModel';\r\nimport WidgetsPanel from './panels/WidgetsPanel';\r\nimport PropertyPanel from './panels/PropertyPanel';\r\nimport DesignPanel from './panels/DesignPanel';\r\n\r\nimport {\r\n    P_PC,\r\n    P_MOBILE,\r\n    P_IPAD,\r\n} from './constants';\r\n\r\nexport default class Designer extends React.Component {\r\n    static propTypes = {\r\n        widgets: PropTypes.array,\r\n        platform: PropTypes.oneOf([P_PC, P_MOBILE, P_IPAD]),\r\n        metadata: PropTypes.object,\r\n    }\r\n\r\n    static defaultProps = {\r\n        onChange: null,\r\n        platform: P_PC,\r\n        widgets: [],\r\n        metadata: {\r\n            items: [],\r\n        }\r\n    }\r\n\r\n    handleModelChange = (items) => {\r\n        const { onChange, metadata } = this.props;\r\n\r\n        onChange && onChange({\r\n            ...metadata,\r\n            items,\r\n        })\r\n    }\r\n\r\n    render() {\r\n        const { widgets, metadata, platform } = this.props;\r\n\r\n        return (\r\n            <DesignModel\r\n                widgets={widgets}\r\n                items={metadata.items}\r\n                platform={platform}\r\n                onChange={this.handleModelChange}\r\n            >\r\n                <div className=\"csos-form-designer\">\r\n                    <div className=\"csos-form-designer-container\">\r\n                        <WidgetsPanel />\r\n                        <DesignPanel />\r\n                        <PropertyPanel />\r\n                    </div>\r\n                </div>\r\n            </DesignModel>\r\n        )\r\n    }\r\n}","import React from 'react';\r\nimport DesignContext from '../DesignContext';\r\nimport Widget from './Widget';\r\n\r\nimport find from 'lodash/find';\r\nimport findIndex from 'lodash/findIndex';\r\n\r\nexport default class DesignModel extends React.Component {\r\n    static getDerivedStateFromProps(props, state) {\r\n\r\n        const widgetsMap = {};\r\n        const widgets = props.widgets.map(widget => {\r\n            const w = new Widget(widget);\r\n            widgetsMap[widget.xtype] = w;\r\n            return w;\r\n        });\r\n\r\n        return {\r\n            widgets,\r\n            widgetsMap,\r\n            items: props.items || [],\r\n        }\r\n    }\r\n\r\n    static defaultProps = {\r\n        onChange: null,\r\n        widgets: [],\r\n        items: [],\r\n    }\r\n\r\n    state = {\r\n        widgets: [],\r\n        widgetsMap: {},\r\n        items: [],\r\n        activeId: null\r\n    }\r\n\r\n    onChange(items) {\r\n        const props = this.props;\r\n        const { onChange } = props;\r\n\r\n        if (onChange) {\r\n            onChange(items);\r\n        }\r\n    }\r\n\r\n    getWidget(xtype) {\r\n        const { widgetsMap } = this.state;\r\n        return widgetsMap[xtype] || null;\r\n    }\r\n\r\n    // isWidget(widget) {\r\n    //     return !!widget.$$widget;\r\n    // }\r\n\r\n    getWidgets() {\r\n        const { widgets } = this.state;\r\n        return [].concat(widgets);\r\n    }\r\n\r\n    setActiveId(activeId) {\r\n        this.setState({\r\n            activeId\r\n        });\r\n    }\r\n\r\n    getActiveId() {\r\n        return this.state.activeId;\r\n    }\r\n\r\n    getActiveItem() {\r\n        const activeId = this.state.activeId;\r\n\r\n        return this.getItem(activeId) || null;\r\n    }\r\n\r\n    getItems(pid = null) {\r\n        const items = this.getAllItems();\r\n        return items.filter(item => item.$pid == pid);\r\n    }\r\n\r\n    getAllItems() {\r\n        return [...this.state.items];\r\n    }\r\n\r\n\r\n    updateItem(item) {\r\n        const items = this.getAllItems();\r\n        const fieldId = item.fieldId;\r\n        const idx = this.getItemIndex(fieldId);\r\n\r\n        if (idx !== -1) {\r\n            items[idx] = item;\r\n        }\r\n\r\n        this.onChange(items);\r\n    }\r\n\r\n    addItem(item, pid = null) {\r\n        const items = this.getAllItems();\r\n\r\n        item.$pid = pid;\r\n\r\n        items.push(item);\r\n\r\n        this.onChange(items);\r\n    }\r\n\r\n    removeItem(fieldId) {\r\n        const items = this.getAllItems();\r\n        const ret = items.filter(item => item.fieldId !== fieldId);\r\n\r\n        this.onChange(ret);\r\n    }\r\n\r\n    getItemIndex(fieldId) {\r\n        const items = this.getAllItems();\r\n        return findIndex(items, item => item.fieldId === fieldId)\r\n    }\r\n\r\n    getItem(fieldId) {\r\n        const items = this.getAllItems();\r\n        return find(items, item => item.fieldId === fieldId)\r\n    }\r\n\r\n    insertBefore(item, fieldId) {\r\n        const items = this.getAllItems();\r\n\r\n        //判断当前item是否已经存在, 如果存在则先删除\r\n        const oIdx = this.getItemIndex(item.fieldId);\r\n        if (oIdx > -1) {\r\n            items.splice(oIdx, 1);\r\n        }\r\n\r\n        const bItem = this.getItem(fieldId);\r\n        item.$pid = bItem.$pid;\r\n\r\n        //插入操作\r\n        const idx = this.getItemIndex(fieldId);\r\n        items.splice(idx, 0, item);\r\n\r\n        this.onChange(items);\r\n    }\r\n\r\n    insertAfter(item, fieldId) {\r\n        const items = this.getAllItems();\r\n\r\n        //判断当前item是否已经存在, 如果存在则先删除\r\n        const oIdx = this.getItemIndex(item.fieldId);\r\n        if (oIdx > -1) {\r\n            items.splice(oIdx, 1);\r\n        }\r\n\r\n        const bItem = this.getItem(fieldId);\r\n        item.$pid = bItem.$pid;\r\n\r\n        //插入操作\r\n        const idx = this.getItemIndex(fieldId);\r\n        items.splice(idx, 1, items[idx], item);\r\n\r\n        this.onChange(items);\r\n    }\r\n\r\n    getModel() {\r\n        return {\r\n            //   isWidget: this.isWidget.bind(this),\r\n            getWidget: this.getWidget.bind(this),\r\n            getWidgets: this.getWidgets.bind(this),\r\n            setActiveId: this.setActiveId.bind(this),\r\n            getActiveId: this.getActiveId.bind(this),\r\n            getActiveItem: this.getActiveItem.bind(this),\r\n            addItem: this.addItem.bind(this),\r\n            updateItem: this.updateItem.bind(this),\r\n            getItems: this.getItems.bind(this),\r\n            getAllItems: this.getAllItems.bind(this),\r\n            removeItem: this.removeItem.bind(this),\r\n            getItemIndex: this.getItemIndex.bind(this),\r\n            getItem: this.getItem.bind(this),\r\n            insertBefore: this.insertBefore.bind(this),\r\n            insertAfter: this.insertAfter.bind(this),\r\n        };\r\n    }\r\n\r\n    render() {\r\n        const { children } = this.props;\r\n        return (\r\n            <DesignContext.Provider value={this.getModel()}>\r\n                {children}\r\n            </DesignContext.Provider>\r\n        )\r\n    }\r\n}","\r\nimport React from 'react';\r\nimport { isValidElementType } from 'react-is';\r\nimport WPreview from './Preview';\r\nimport WDragPreview from './DragPreview';\r\nimport WPlaceholderPreview from './PlaceholderPreview';\r\nimport WWidgetProperty from './WidgetProperty';\r\n\r\nexport default class Widget {\r\n    /**\r\n         *\r\n         * @param {object} options 控件基本信息: 名称 图标 属性面板组件 预览组件 属性等\r\n         * @param {string} optopns.xtype 控件ID\r\n         * @param {string} optopns.title 控件名称\r\n         * @param {string} optopns.icon  控件图标\r\n         * @param {ReactElementType} optopns.Preview  控件拖放后预览组件\r\n         * @param {ReactElementType} optopns.DragPreview  控件拖拽时预览组件\r\n         * @param {ReactElementType} optopns.PlaceholderPreview  控件拖拽时占位预览组件\r\n         * @param {ReactElementType} optopns.WidgetProperty  控件属性面板组件\r\n         * @param {function|object} optopns.data 控件属性\r\n         * @memberof WidgetManager\r\n         */\r\n    constructor(options = {}) {\r\n        this.$$widget = true;\r\n        this.options = options;\r\n\r\n        this.xtype = options.xtype;\r\n        this.title = options.title;\r\n        this.icon = options.icon;\r\n\r\n        this.Preview = isValidElementType(options.Preview) ? options.Preview : WPreview;\r\n        this.DragPreview = isValidElementType(options.DragPreview) ? options.DragPreview : WDragPreview;\r\n        this.PlaceholderPreview = isValidElementType(options.PlaceholderPreview) ? options.PlaceholderPreview : WPlaceholderPreview;\r\n        this.WidgetProperty = isValidElementType(options.WidgetProperty) ? options.WidgetProperty : WWidgetProperty;\r\n\r\n    }\r\n\r\n    getItem() {\r\n        const data = this.options.data;\r\n        const ret = typeof data === 'function' ? data() : data;\r\n\r\n        return {\r\n            ...ret,\r\n            xtype: this.xtype,\r\n        }\r\n    }\r\n\r\n    get(name) {\r\n        return this.options[name];\r\n    }\r\n\r\n    set(name, value) {\r\n        this.options[name] = value;\r\n\r\n        return this;\r\n    }\r\n\r\n}","import React from 'react';\r\nimport classNames from 'classnames';\r\n\r\nexport default function (props) {\r\n    const item = props.item;\r\n    const classString = classNames({\r\n        'widget-preview-item-inner': true,\r\n        [props.className]: props.className\r\n    });\r\n\r\n    return (\r\n        <div\r\n            className={classString}\r\n        >\r\n            <label className=\"widget-preview-title\">{item.title}</label>\r\n            <span className=\"widget-preview-input\">{item.placeholder}</span>\r\n            {/* <span className=\"widget-preview-close\" onClick={onRemove}>x</span> */}\r\n        </div>\r\n    )\r\n}","import React from 'react';\r\n\r\nexport default () => {\r\n    return null;\r\n}","import React from 'react';\r\n\r\nexport default function WidgetPlaceholderItem() {\r\n\r\n    return (\r\n        <div className=\"drag-item-placeholder\">\r\n            <div className=\"drag-item-placeholder-inner\">\r\n            </div>\r\n        </div>\r\n    );\r\n}","import React from 'react';\r\n\r\nexport default ({\r\n    item,\r\n    onChange\r\n}) => {\r\n\r\n    return (\r\n        <div>\r\n            默认属性面板\r\n        </div>\r\n    );\r\n}","import React from 'react';\r\n\r\nexport default React.createContext({});","import Form from './Form';\r\nimport FormItem from './FormItem';\r\nimport NativeField from './NativeField';\r\n\r\nexport {\r\n    Form,\r\n    FormItem,\r\n    NativeField,\r\n};\r\n\r\nForm.Item = FormItem;\r\nForm.NativeField = NativeField;\r\n\r\nexport default Form;","import React from 'react';\r\nimport DesignContext from '../../DesignContext';\r\nimport WidgetItem from './WidgetItem';\r\n\r\nexport default class WidgetsPanel extends React.Component {\r\n\r\n    static contextType = DesignContext;\r\n\r\n    render() {\r\n        const designer = this.context;\r\n        const widgets = designer.getWidgets();\r\n\r\n        return (\r\n            <div className=\"widgets-panel\">\r\n                <div className=\"widgets-panel-header\">\r\n                    控件列表\r\n                </div>\r\n                <div className=\"widgets-panel-body\">\r\n                    {\r\n                        widgets.map(widget => {\r\n                            return (\r\n                                <WidgetItem key={widget.xtype} widget={widget} />\r\n                            );\r\n                        })\r\n                    }\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n}","import React from 'react';\r\nimport {\r\n    DragSource,\r\n    DropTarget,\r\n} from 'react-dnd';\r\nimport cx from 'classnames';\r\nimport {\r\n    WIDGET_DRAG_DROP_SCOPE\r\n} from '../../constants';\r\n\r\nconst spec = {\r\n    beginDrag(props) {\r\n        const widget = props.widget;\r\n        const item = widget.getItem();\r\n        return {\r\n            isWidgetDragging: true,\r\n            widget,\r\n            item,\r\n        };\r\n    },\r\n    // endDrag(props, monitor, component) {\r\n    //     console.log('endDrag')\r\n    // },\r\n    // canDrag(props) {\r\n    //     return !props.disabled;\r\n    // }\r\n};\r\n\r\nconst collect = (connect, monitor) => {\r\n    return {\r\n        connectDragSource: connect.dragSource(),\r\n        isDragging: monitor.isDragging(),\r\n    };\r\n};\r\n\r\nclass WidgetItem extends React.Component {\r\n\r\n    render() {\r\n        const { disabled, widget, connectDragSource, isDragging } = this.props;\r\n        const { title = \"未知组件\", icon } = widget;\r\n        return connectDragSource(\r\n            <div className={cx({\r\n                \"widget-item\": true,\r\n                \"widget-item-dragging\": isDragging,\r\n                \"widget-item-disabled\": disabled,\r\n            })}>\r\n                <div className=\"widget-item-title\">\r\n                    <img src={icon} />\r\n                    <span className=\"widget-text\">{title}</span>\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nexport default DragSource(WIDGET_DRAG_DROP_SCOPE, spec, collect)(WidgetItem);","import React from 'react';\r\nimport DesignContext from '../DesignContext';\r\n// import { getWidgetPropertyPanel } from './widgets';\r\n// import {\r\n//     Form,\r\n//     FormItem,\r\n//     NativeField,\r\n// } from 'components/Form';\r\n\r\nexport default class PropertyPanel extends React.Component {\r\n\r\n    static contextType = DesignContext;\r\n\r\n    onItemChange = (item) => {\r\n        const designer = this.context;\r\n        const activeItem = designer.getActiveItem();\r\n\r\n        designer.updateItem({\r\n            ...activeItem,\r\n            ...item,\r\n        });\r\n    }\r\n\r\n    render() {\r\n        const designer = this.context;\r\n        const activeItem = designer.getActiveItem();\r\n        if (!activeItem) {\r\n            return (\r\n                <div className=\"property-panel\">\r\n                    <div style={{ padding: 30, textAlign: 'center' }}>请先选择控件</div>\r\n                </div>\r\n            )\r\n        }\r\n\r\n        const widget = designer.getWidget(activeItem.xtype);\r\n\r\n        if (!widget) {\r\n            return (\r\n                <div className=\"property-panel\">\r\n                    <div style={{ padding: 30, textAlign: 'center' }}>无.</div>\r\n                </div>\r\n            );\r\n        }\r\n\r\n        return (\r\n            <div className=\"property-panel\">\r\n                <widget.WidgetProperty\r\n                    widget={widget}\r\n                    onChange={this.onItemChange}\r\n                    item={{ ...activeItem }}\r\n                    key={activeItem.fieldId}\r\n                />\r\n            </div>\r\n        );\r\n    }\r\n}","import React from 'react';\r\nimport DesignContext from '../../DesignContext';\r\nimport WidgetDropAccepter from './WidgetDropAccepter';\r\n\r\nexport default class DesignPanel extends React.Component {\r\n    static contextType = DesignContext;\r\n\r\n    render() {\r\n        const pid = null\r\n        const designer = this.context;\r\n        const items = designer.getItems(pid);\r\n\r\n        return (\r\n            <div className=\"design-panel\">\r\n                <WidgetDropAccepter items={items} pid={pid} />\r\n            </div>\r\n        );\r\n    }\r\n}","import React from 'react';\r\nimport { findDOMNode } from 'react-dom';\r\nimport flow from 'lodash/flow';\r\nimport get from 'lodash/get';\r\nimport {\r\n    DragSource,\r\n    DropTarget,\r\n} from 'react-dnd';\r\nimport cx from 'classnames';\r\nimport {\r\n    WIDGET_DRAG_DROP_SCOPE\r\n} from '../../constants';\r\nimport DesignContext from '../../DesignContext';\r\n\r\nconst dragSpec = {\r\n    beginDrag(props) {\r\n        const widget = props.widget;\r\n        const item = props.item;\r\n        return {\r\n            isWidgetDragging: false,\r\n            isPreviewDragging: false,\r\n            widget: widget,\r\n            item: item,\r\n        };\r\n    },\r\n    // endDrag(props, monitor, component) {\r\n    //     console.log('endDrag')\r\n    // }\r\n};\r\n\r\nconst dragCollect = (connect, monitor) => {\r\n    return {\r\n        connectDragSource: connect.dragSource(),\r\n        isDragging: monitor.isDragging(),\r\n    };\r\n}\r\n\r\nconst dropSpec = {\r\n\r\n    canDrop(props, monitor, component) {\r\n        const dragItem = monitor.getItem();\r\n        if (dragItem.isWidgetDragging) return true;\r\n\r\n        return props.item.fieldId !== dragItem.item.fieldId;\r\n    },\r\n\r\n    hover(props, monitor, component) {\r\n        const isOver = monitor.isOver({ shallow: true });\r\n        if (!isOver) return;\r\n        // console.log('item hover...')\r\n        const { placeholderPosition } = component.state;\r\n        const designer = component.context;\r\n        const { item } = props;\r\n        const dragItem = monitor.getItem();\r\n        const dragItemFieldId = dragItem.item.fieldId;\r\n        let isSortMode = false;\r\n\r\n        if (!dragItem.isWidgetDragging) {\r\n            isSortMode = true;\r\n        }\r\n\r\n        const dragOffset = monitor.getClientOffset();\r\n        const previewDOM = findDOMNode(component);\r\n\r\n        if (isSortMode) {\r\n            //顺序调整模式\r\n            if (item.fieldId === dragItemFieldId) {\r\n                return;\r\n            } else {\r\n                const targetOffset = previewDOM.querySelector('.widget-preview-item').getBoundingClientRect();\r\n                const middleY = targetOffset.bottom - (targetOffset.height / 2);\r\n                if (dragOffset.y <= middleY) {\r\n                    designer.insertBefore(dragItem.item, item.fieldId);\r\n                } else {\r\n                    designer.insertAfter(dragItem.item, item.fieldId);\r\n                }\r\n            }\r\n\r\n        } else {\r\n            //新增模式\r\n            const targetOffset = previewDOM.getBoundingClientRect();\r\n            const middleY = targetOffset.bottom - (targetOffset.height / 2);\r\n\r\n            let pos = 'none';\r\n\r\n            if (dragOffset.y <= middleY) {\r\n                pos = 'top';\r\n            } else {\r\n                pos = 'bottom';\r\n            }\r\n            //设置放置位置\r\n            if (placeholderPosition !== pos) {\r\n                dragItem._dropTarget = {\r\n                    id: item.fieldId,\r\n                    pos,\r\n                }\r\n\r\n                component.setState({\r\n                    placeholderPosition: pos\r\n                });\r\n            }\r\n\r\n        }\r\n\r\n    },\r\n\r\n    drop(props, monitor, component) {\r\n        if (monitor.didDrop()) {\r\n            return;\r\n        }\r\n        const designer = component.context;\r\n        let dragItem = monitor.getItem();\r\n\r\n        if (!dragItem.isWidgetDragging) {\r\n            return;\r\n        }\r\n\r\n        const dropId = get(dragItem, '_dropTarget.id', null);\r\n        const dropPos = get(dragItem, '_dropTarget.pos', 'none');\r\n\r\n        delete dragItem._dropTarget;\r\n\r\n        if (dropId) {\r\n            if (dropPos === 'top') {\r\n                designer.insertBefore(dragItem.item, dropId);\r\n            } else if (dropPos === 'bottom') {\r\n                designer.insertAfter(dragItem.item, dropId);\r\n            } else {\r\n                designer.addItem(dragItem.item);\r\n            }\r\n        } else {\r\n            designer.addItem(dragItem.item);\r\n        }\r\n    }\r\n};\r\n\r\nconst dropCollect = (connect, monitor) => {\r\n    return {\r\n        connectDropTarget: connect.dropTarget(),\r\n        isOver: monitor.isOver({ shallow: true }),\r\n        canDrop: monitor.canDrop(),\r\n        dragItem: monitor.getItem(),\r\n    }\r\n}\r\n\r\nclass WidgetPreviewItem extends React.Component {\r\n\r\n    static contextType = DesignContext;\r\n\r\n    state = {\r\n        placeholderPosition: 'none', //none after before top bottom\r\n    }\r\n\r\n    handlePreviewClick(item) {\r\n        const designer = this.context;\r\n        designer.setActiveId(item.fieldId);\r\n    }\r\n\r\n    handleRemove = () => {\r\n        const designer = this.context;\r\n        const { item } = this.props;\r\n        designer.removeItem(item.fieldId)\r\n    }\r\n\r\n    render() {\r\n        const { connectDropTarget, connectDragSource, isDragging, isOver, widget, item, dragItem } = this.props;\r\n        const { placeholderPosition } = this.state;\r\n        const designer = this.context;\r\n        const activeId = designer.getActiveId();\r\n        //如果来源不是组建面板,则是排序模式\r\n        const isSortMode = dragItem && !dragItem.isWidgetDragging;\r\n        // const items = layout.getLayoutChildren(data.id);\r\n\r\n        return connectDropTarget(\r\n            <div className={cx({\r\n                \"widget-preview-item-wrapper\": true,\r\n                \"droppable\": isOver,\r\n                \"dragging\": isDragging,\r\n                // \"drop-tips\": canDrop,\r\n            })}>\r\n                {placeholderPosition === 'top' && isOver && !isSortMode ? <widget.PlaceholderPreview /> : null}\r\n                <div\r\n                    ref={connectDragSource}\r\n                    className={cx({\r\n                        \"widget-preview-item\": true,\r\n                        \"widget-preview-item-selected\": activeId === item.fieldId,\r\n                    })}\r\n                    onClick={this.handlePreviewClick.bind(this, item)}\r\n                >\r\n                    <widget.Preview item={item} designer={designer} />\r\n                    <span className=\"widget-preview-close\" onClick={this.handleRemove}>x</span>\r\n                </div>\r\n                {placeholderPosition === 'bottom' && isOver && !isSortMode ? <widget.PlaceholderPreview /> : null}\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nexport default flow(\r\n    DropTarget(WIDGET_DRAG_DROP_SCOPE, dropSpec, dropCollect),\r\n    DragSource(WIDGET_DRAG_DROP_SCOPE, dragSpec, dragCollect),\r\n)(WidgetPreviewItem)","import TextField from './TextField';\r\nimport TextareaField from './TextareaField';\r\nimport SelectField from './SelectField';\r\n// import MultiSelectField from './MultiSelectField';\r\n// import NumberField from './NumberField';\r\n// import DateField from './DateField';\r\nimport URLField from './URLField';\r\n// import FileField from './FileField';\r\nimport DetailedField from './DetailedField';\r\n\r\nexport default [\r\n    TextField,\r\n    TextareaField,\r\n    SelectField,\r\n    // MultiSelectField,\r\n    // NumberField,\r\n    // DateField,\r\n    URLField,\r\n    DetailedField,\r\n    // FileField,\r\n];","import data from '../common/data';\r\nimport PropertyPanel from './PropertyPanel';\r\nimport icon from './icon.png';\r\n\r\nconst XType = 'EX_TEXT_FIELD';\r\nconst Title = '文本';\r\n\r\nexport default {\r\n    xtype: \"EX_TEXT_FIELD\",\r\n    title: \"文本\",\r\n    icon: icon,\r\n    WidgetProperty: PropertyPanel,\r\n\r\n    data() {\r\n        return {\r\n            ...data(),\r\n            xtype: XType,\r\n            title: Title,\r\n        }\r\n    }\r\n};","export function uuid() {\r\n    return Math.random().toString(16).slice(2, 8);\r\n}\r\n","import React from 'react';\r\nimport PropertyForm from '../PropertyForm';\r\n// import {\r\n//     FormItem,\r\n//     NativeField,\r\n// } from 'components/Form';\r\n\r\nimport CommonPropertyPanel from '../common/CommonPropertyPanel';\r\nimport ValidatePropertyPanel from '../common/ValidatePropertyPanel';\r\n\r\nexport default function (props) {\r\n\r\n    return (\r\n        <PropertyForm {...props}>\r\n            <CommonPropertyPanel />\r\n            <ValidatePropertyPanel />\r\n        </PropertyForm>\r\n    );\r\n}","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport classnames from 'classnames';\r\nimport AsyncValidator from 'async-validator';\r\nimport set from 'lodash/set';\r\nimport get from 'lodash/get';\r\nimport scrollIntoView from 'bplokjs-dom-utils/scrollIntoView';\r\nimport FormContext from './FormContext';\r\n\r\nAsyncValidator.warning = function () { };\r\n\r\nexport default class Form extends React.Component {\r\n    static propTypes = {\r\n        prefixCls: PropTypes.string,\r\n        className: PropTypes.string,\r\n        style: PropTypes.object,\r\n        path2obj: PropTypes.bool,\r\n        formDefaultValue: PropTypes.object,\r\n        formValue: PropTypes.object,\r\n        validateDelay: PropTypes.number,\r\n        validateTrigger: PropTypes.string, //change blur none\r\n        component: PropTypes.node,\r\n        rules: PropTypes.oneOfType([PropTypes.object, PropTypes.array, PropTypes.func]),\r\n        labelWidth: PropTypes.oneOfType([PropTypes.string, PropTypes.number]),\r\n        labelPosition: PropTypes.oneOf(['top', 'left', 'right']),\r\n        alignItems: PropTypes.oneOf(['top', 'center', 'bottom']),\r\n        inline: PropTypes.bool,\r\n        onSubmit: PropTypes.func,\r\n        onChange: PropTypes.func,\r\n        validateFieldsAndScroll: PropTypes.bool,\r\n        showMessage: PropTypes.bool,\r\n        getFormItemInputProps: PropTypes.func,\r\n    }\r\n\r\n    static defaultProps = {\r\n        prefixCls: 'rw-form',\r\n        className: '',\r\n        style: {},\r\n        rules: {},\r\n        path2obj: true,\r\n        component: 'form',\r\n        validateDelay: 0,\r\n        validateTrigger: 'none',\r\n        labelPosition: 'left',\r\n        alignItems: \"center\",\r\n        inline: false,\r\n        showMessage: true,\r\n    }\r\n\r\n    static getDerivedStateFromProps(nextProps, prevState) {\r\n        return {\r\n            formValue: nextProps.formValue || prevState.formValue,\r\n        }\r\n    }\r\n\r\n    fields = []\r\n    _valiateCb = []\r\n\r\n    state = {\r\n        formError: {},\r\n        validatingFields: {},\r\n        formValue: this.props.formDefaultValue || {},\r\n    }\r\n\r\n    addField(field) {\r\n        this.fields.push(field);\r\n    }\r\n\r\n    removeField(field) {\r\n        var idx = this.fields.indexOf(field);\r\n        if (idx !== -1) {\r\n            this.fields.splice(idx, 1);\r\n        }\r\n    }\r\n\r\n    getValue(name) {\r\n        const path2obj = this.props.path2obj;\r\n        const formValue = this.state.formValue;\r\n        if (path2obj) {\r\n            return get(formValue, name);\r\n        }\r\n        return formValue[name];\r\n    }\r\n\r\n    setValue(name, value, event, cb) {\r\n        const { path2obj, onChange } = this.props;\r\n        const formValue = this.state.formValue;\r\n\r\n        const nextFormValue = {\r\n            ...formValue\r\n        };\r\n\r\n        if (path2obj) {\r\n            set(nextFormValue, name, value);\r\n        } else {\r\n            nextFormValue[name] = value;\r\n        }\r\n\r\n        if (!('formValue' in this.props)) {\r\n            this.setState({\r\n                formValue: nextFormValue\r\n            });\r\n        }\r\n\r\n        if (onChange) {\r\n            onChange(nextFormValue, event);\r\n        }\r\n\r\n        if (cb) {\r\n            this._valiateCb.push(cb);\r\n        }\r\n\r\n        return this;\r\n    }\r\n\r\n    componentDidUpdate() {\r\n        const formValue = this.state.formValue;\r\n        const validateProcess = this._valiateCb;\r\n        this._valiateCb = [];\r\n        validateProcess.forEach(cb => {\r\n            cb(formValue);\r\n        });\r\n    }\r\n\r\n    componentWillUnmount() {\r\n        this._valiateCb = [];\r\n    }\r\n\r\n    getError(name) {\r\n        const { formError } = this.state;\r\n        if (!arguments.length) return formError;\r\n        return formError[name];\r\n    }\r\n\r\n    cleanErrors() {\r\n        this.setState({\r\n            validatingFields: {},\r\n            formError: {}\r\n        });\r\n    }\r\n\r\n    setErrors(errors) {\r\n        const { formError } = this.state;\r\n        this.setState({\r\n            ...formError,\r\n            ...errors\r\n        });\r\n    }\r\n\r\n    getFieldRules(name) {\r\n        const fieldRules = [];\r\n        this.fields\r\n            .filter(field => field.props.name === name)\r\n            .forEach(field => {\r\n                const fieldProps = field.props;\r\n                let rules = fieldProps.rules || [];\r\n                if (typeof rules === 'function') {\r\n                    rules = [\r\n                        {\r\n                            validator: rules\r\n                        }\r\n                    ]\r\n                } else if (!Array.isArray(rules)) {\r\n                    rules = [rules];\r\n                }\r\n                if (fieldProps.required) {\r\n                    rules.unshift({\r\n                        required: true\r\n                    });\r\n                }\r\n\r\n                fieldRules.push(...rules);\r\n            });\r\n\r\n        let rules = this.props.rules[name] || [];\r\n        if (rules) {\r\n            if (typeof rules === 'function') {\r\n                rules = [\r\n                    {\r\n                        validator: rules\r\n                    }\r\n                ]\r\n            } else if (!Array.isArray(rules)) {\r\n                rules = [rules];\r\n            }\r\n        }\r\n\r\n        return rules ? fieldRules.concat(rules) : fieldRules;\r\n    }\r\n\r\n    isValidatingField(name) {\r\n        const validatingFields = this.state.validatingFields;\r\n        return !!validatingFields[name];\r\n    }\r\n\r\n    validateField(name, cb) {\r\n        const { formError, validatingFields } = this.state;\r\n        const value = this.getValue(name);\r\n        const rules = this.getFieldRules(name);\r\n\r\n        if (!rules || rules.length === 0) {\r\n            if (cb instanceof Function) {\r\n                cb(null, value);\r\n            }\r\n            return;\r\n        }\r\n\r\n        this.setState({\r\n            validatingFields: {\r\n                ...validatingFields,\r\n                [name]: true,\r\n            }\r\n        });\r\n\r\n        const descriptor = { [name]: rules };\r\n        const validator = new AsyncValidator(descriptor);\r\n        const data = { [name]: value };\r\n\r\n        validator.validate(data, { firstFields: true }, errors => {\r\n            this.setState({\r\n                formError: {\r\n                    ...formError,\r\n                    [name]: errors ? errors[0].message : null\r\n                },\r\n                validatingFields: {\r\n                    ...validatingFields,\r\n                    [name]: false,\r\n                },\r\n            }, () => {\r\n                if (cb instanceof Function) {\r\n                    cb(errors, value);\r\n                }\r\n            });\r\n        });\r\n    }\r\n\r\n    validate(callback) {\r\n        const { formValue } = this.state;\r\n        const fields = this.fields;\r\n        const rules = {};\r\n\r\n        if (fields.length === 0 && callback) {\r\n            callback(null, formValue);\r\n            return;\r\n        }\r\n\r\n        fields.forEach(field => {\r\n            const name = field.props.name;\r\n            if (!name || name in rules) return;\r\n            const fieldRules = this.getFieldRules(name);\r\n            if (fieldRules && fieldRules.length) {\r\n                rules[name] = fieldRules;\r\n            }\r\n        });\r\n\r\n        const validatingFields = {};\r\n\r\n        const validator = new AsyncValidator(rules);\r\n        const data = {};\r\n        Object.keys(rules).forEach(key => {\r\n            data[key] = get(formValue, key);\r\n            validatingFields[key] = true;\r\n        });\r\n\r\n        this.setState({\r\n            validatingFields\r\n        });\r\n\r\n        validator.validate(data, { firstFields: true }, errors => {\r\n            const formError = {};\r\n            if (errors) {\r\n                errors.forEach(error => {\r\n                    formError[error.field] = error.message;\r\n                });\r\n            }\r\n            this.setState({\r\n                formError,\r\n                validatingFields: {},\r\n            }, () => {\r\n                if (callback instanceof Function) {\r\n                    callback(errors, formValue);\r\n                }\r\n            });\r\n\r\n        });\r\n    }\r\n\r\n    validateAndScroll(callback) {\r\n        this.validate((errors, formValue) => {\r\n            if (errors) {\r\n                let field;\r\n                const formError = this.state.formError;\r\n                const fields = this.fields;\r\n                fields.forEach(f => {\r\n                    const name = f.props.name;\r\n                    if (!name) return;\r\n                    if (!field && (name in formError)) {\r\n                        field = f;\r\n                    }\r\n                });\r\n\r\n                if (field) {\r\n                    scrollIntoView(field.getDOM());\r\n                }\r\n            }\r\n\r\n            callback(errors, formValue);\r\n        });\r\n    }\r\n\r\n    onFieldChange(name, value) {\r\n        const { formValue } = this.state;\r\n\r\n        formValue.set(name, value);\r\n    }\r\n\r\n    getFormContext() {\r\n        return {\r\n            form: this,\r\n        };\r\n    }\r\n\r\n    render() {\r\n        const {\r\n            prefixCls,\r\n            style,\r\n            className,\r\n            onSubmit,\r\n            component: Component,\r\n            children\r\n        } = this.props;\r\n\r\n        return (\r\n            <FormContext.Provider value={this.getFormContext()}>\r\n                <Component\r\n                    style={style}\r\n                    className={classnames(prefixCls, className)}\r\n                    onSubmit={onSubmit}\r\n                >\r\n                    {typeof children === 'function' ? children(this) : children}\r\n                </Component>\r\n            </FormContext.Provider>\r\n        )\r\n    }\r\n}\r\n\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport classnames from 'classnames';\r\nimport FormContext from './FormContext';\r\nexport default class FormItem extends React.Component {\r\n\r\n    static contextType = FormContext;\r\n\r\n    static propTypes = {\r\n        label: PropTypes.node,\r\n        labelFor: PropTypes.oneOfType([PropTypes.string, PropTypes.number]),\r\n        labelWidth: PropTypes.oneOfType([PropTypes.string, PropTypes.number]),\r\n        labelPosition: PropTypes.oneOf(['top', 'left', 'right']),\r\n        alignItems: PropTypes.oneOf(['top', 'center', 'bottom']),\r\n        name: PropTypes.string,\r\n        rules: PropTypes.oneOfType([PropTypes.object, PropTypes.array, PropTypes.func]),\r\n        required: PropTypes.bool,\r\n        normalize: PropTypes.func,\r\n        validateDelay: PropTypes.number,\r\n        validateTrigger: PropTypes.string, //change blur none\r\n        inline: PropTypes.bool,\r\n        showMessage: PropTypes.bool,\r\n        help: PropTypes.node,\r\n        style: PropTypes.object,\r\n        //extra: PropTypes.node,\r\n    }\r\n\r\n    static defaultProps = {\r\n        prefixCls: 'rw-form-item',\r\n        // labelPosition: 'left',\r\n        // alignItems: \"center\",\r\n        // inline: false,\r\n        //showMessage: true,\r\n    }\r\n\r\n    saveDOM = dom => {\r\n        this._dom = dom;\r\n    }\r\n\r\n    getDOM() {\r\n        return this._dom;\r\n    }\r\n\r\n    componentDidMount() {\r\n        const { form } = this.context;\r\n        const { name } = this.props;\r\n\r\n        if (name) {\r\n            form.addField(this);\r\n        }\r\n    }\r\n\r\n    componentWillUnmount() {\r\n        const { form } = this.context;\r\n        form.removeField(this);\r\n    }\r\n\r\n    isRequired() {\r\n        const { form } = this.context;\r\n        const { name } = this.props;\r\n        let rules = form.getFieldRules(name);\r\n        let isRequired = false;\r\n\r\n        if (rules && rules.length) {\r\n            isRequired = rules.some(rule => rule.required);\r\n        }\r\n\r\n        return isRequired;\r\n    }\r\n\r\n    _validateTimer = null\r\n\r\n    getValidateTrigger() {\r\n        const { form } = this.context;\r\n        const { validateTrigger } = form.props;\r\n        const props = this.props;\r\n\r\n        return 'validateTrigger' in props ? props.validateTrigger : validateTrigger;\r\n    }\r\n\r\n    getValidateDelay() {\r\n        const { form } = this.context;\r\n        const { validateDelay } = form.props;\r\n        const props = this.props;\r\n\r\n        return 'validateDelay' in props ? props.validateDelay : validateDelay;\r\n    }\r\n\r\n    onFieldBlur() {\r\n        const { form } = this.context;\r\n        const validateTrigger = this.getValidateTrigger();\r\n        const validateDelay = this.getValidateDelay();\r\n        const { name } = this.props;\r\n\r\n        if (validateTrigger === 'blur') {\r\n            if (validateDelay > 0) {\r\n                if (this._validateTimer) clearTimeout(this._validateTimer)\r\n                this._validateTimer = setTimeout(() => {\r\n                    form.validateField(name);\r\n                }, validateDelay);\r\n            } else {\r\n                form.validateField(name);\r\n            }\r\n        }\r\n    }\r\n\r\n    getValue() {\r\n        const { name } = this.props;\r\n        const { form } = this.context;\r\n\r\n        return form.getValue(name);\r\n    }\r\n\r\n    onFieldChange(value, e) {\r\n        const { form } = this.context;\r\n        const { name } = this.props;\r\n\r\n        form.setValue(name, value, e, () => {\r\n            const validateTrigger = this.getValidateTrigger();\r\n            const validateDelay = this.getValidateDelay();\r\n\r\n            if (validateTrigger === 'change') {\r\n                if (validateDelay > 0) {\r\n                    if (this._validateTimer) clearTimeout(this._validateTimer)\r\n                    this._validateTimer = setTimeout(() => {\r\n                        form.validateField(name);\r\n                    }, validateDelay);\r\n                } else {\r\n                    form.validateField(name);\r\n                }\r\n            }\r\n        });\r\n\r\n\r\n    }\r\n\r\n    getLabelProps() {\r\n        const { form } = this.context;\r\n        const formProps = form.props;\r\n        const props = this.props;\r\n\r\n        return {\r\n            inline: 'inline' in props ? props.inline : formProps.inline,\r\n            labelPosition: 'labelPosition' in props ? props.labelPosition : formProps.labelPosition,\r\n            labelWidth: 'labelWidth' in props ? props.labelWidth : formProps.labelWidth,\r\n            alignItems: 'alignItems' in props ? props.alignItems : formProps.alignItems,\r\n            showMessage: 'showMessage' in props ? props.showMessage : formProps.showMessage,\r\n        }\r\n    }\r\n\r\n    render() {\r\n        const { form } = this.context;\r\n        const {\r\n            normalize,\r\n            label,\r\n            required,\r\n            labelFor,\r\n            className,\r\n            prefixCls,\r\n            name,\r\n            help,\r\n            style,\r\n            //extra,\r\n        } = this.props;\r\n        const { inline, labelPosition, labelWidth, alignItems, showMessage } = this.getLabelProps();\r\n        const error = form.getError(name);\r\n        const validating = form.isValidatingField(name);\r\n\r\n        const children = React.Children.only(this.props.children);\r\n\r\n        const {\r\n            onChange,\r\n            onBlur\r\n        } = children.props;\r\n\r\n        const getFormItemInputProps = form.props.getInputProps || function () { return {} };\r\n\r\n        const onFieldChange = this.onFieldChange.bind(this);\r\n        const onFieldBlur = this.onFieldBlur.bind(this);\r\n\r\n        const InputComponent = React.cloneElement(children, {\r\n            ...getFormItemInputProps(name),\r\n            value: this.getValue(),\r\n            onChange: function (value, event) {\r\n                if (normalize) {\r\n                    value = normalize(value);\r\n                }\r\n\r\n                onChange && onChange(value, event);\r\n\r\n                onFieldChange(value, event)\r\n            },\r\n            onBlur: function (e) {\r\n                onBlur && onBlur(e);\r\n                onFieldBlur(e)\r\n            },\r\n        });\r\n\r\n        return (\r\n            <div\r\n                style={style}\r\n                ref={this.saveDOM}\r\n                className={classnames(prefixCls, {\r\n                    [`${prefixCls}-inline`]: inline,\r\n                    [`${prefixCls}-position-${labelPosition}`]: labelPosition,\r\n                    [`${prefixCls}-align-items-${alignItems}`]: alignItems !== 'center',\r\n                    [`${prefixCls}-error`]: error,\r\n                    [`${prefixCls}-validating`]: validating,\r\n                    [`${prefixCls}-required`]: this.isRequired() || required,\r\n                    [`${prefixCls}-with-help`]: help,\r\n                    [`${className}`]: className,\r\n                })}\r\n            >\r\n                {\r\n                    label && (\r\n                        <label\r\n                            htmlFor={labelFor}\r\n                            className={`${prefixCls}-label`}\r\n                            style={{\r\n                                width: labelWidth\r\n                            }}\r\n                        >\r\n                            {label}\r\n                        </label>\r\n                    )\r\n                }\r\n                <div className={`${prefixCls}-content`}>\r\n                    {InputComponent}\r\n                    {\r\n                        !help && showMessage && error ? (\r\n                            <div className={`${prefixCls}-error-tip`} >{error}</div>\r\n                        ) : null\r\n                    }\r\n                    {\r\n                        help ? (\r\n                            <div className={`${prefixCls}-help`} >{help}</div>\r\n                        ) : null\r\n                    }\r\n                </div>\r\n            </div>\r\n        )\r\n    }\r\n}","import React from 'react';\r\n\r\nexport default function NativeField(props) {\r\n    const {\r\n        component: Component = 'input',\r\n        value,\r\n        inputRef,\r\n        onChange,\r\n        ...others\r\n    } = props;\r\n\r\n    const onInputChange = (e) => {\r\n        const value = e.target.value;\r\n        onChange && onChange(value, e);\r\n    }\r\n\r\n    return (\r\n        <Component\r\n            ref={inputRef}\r\n            onChange={onInputChange}\r\n            value={value}\r\n            {...others}\r\n        />\r\n    );\r\n}","import React from 'react';\r\n// import { FormItem } from '../Form';\r\nimport Icon from '../Icon';\r\n\r\nexport default class MultipleInputField extends React.Component {\r\n\r\n    static getDerivedStateFromProps(props, state) {\r\n        let value = props.value || state.value;\r\n\r\n        if (!Array.isArray(value)) {\r\n            value = [];\r\n        }\r\n\r\n        if (!value.length) {\r\n            value.push({\r\n                value: '选项1',\r\n                label: '选项1',\r\n            });\r\n        }\r\n\r\n        return {\r\n            value: [...value],\r\n            sIndex: Math.max(value.length, state.sIndex),\r\n        }\r\n    }\r\n    state = {\r\n        value: this.props.defaultValue || [],\r\n        sIndex: 1,\r\n    }\r\n\r\n    onItemChange(index, e) {\r\n        const { onChange } = this.props;\r\n        const { value } = this.state;\r\n        value[index] = {\r\n            value: e.target.value,\r\n            label: e.target.value,\r\n        };\r\n\r\n        onChange && onChange(value);\r\n    }\r\n\r\n    onAddItem(index) {\r\n        const { onChange } = this.props;\r\n        const { value, sIndex } = this.state;\r\n\r\n        const text = '选项' + (1 + sIndex);\r\n\r\n        this.setState({\r\n            sIndex: sIndex + 1,\r\n        });\r\n\r\n        const item = {\r\n            value: text,\r\n            label: text,\r\n        };\r\n\r\n        value.splice(index, 1,\r\n            value[index],\r\n            item\r\n        )\r\n\r\n        onChange && onChange(value);\r\n    }\r\n\r\n    onRemoveItem(index) {\r\n        const { onChange } = this.props;\r\n        const { value } = this.state;\r\n\r\n        if (value.length <= 1) return;\r\n\r\n        value.splice(index, 1)\r\n\r\n        onChange && onChange(value);\r\n    }\r\n\r\n    renderItem = (item, i) => {\r\n\r\n        return (\r\n            <div className=\"multi-input-item\" key={i}>\r\n                <div className=\"multi-input\">\r\n                    <input\r\n                        value={item.label}\r\n                        placeholder=\"选项名称\"\r\n                        onChange={this.onItemChange.bind(this, i)}\r\n                    />\r\n                </div>\r\n                <div className=\"multi-input-tools\">\r\n                    <Icon type=\"add\" onClick={this.onAddItem.bind(this, i)}>+</Icon>\r\n                    <Icon type=\"remove\" onClick={this.onRemoveItem.bind(this, i)}>-</Icon>\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n\r\n    render() {\r\n        const { value } = this.state;\r\n\r\n        return (\r\n            <div className=\"multi-input-wrapper\">\r\n                {\r\n                    value.map(this.renderItem)\r\n                }\r\n            </div>\r\n        );\r\n    }\r\n}","import React from 'react';\r\n\r\nexport default props => {\r\n    return (\r\n        <span>{props.value}</span>\r\n    )\r\n}","import React from 'react';\r\nimport Icon from '../Icon';\r\n\r\nfunction getUnit(value) {\r\n\r\n    if (/px$/.test(value)) {\r\n        return 'px';\r\n    }\r\n\r\n    if (/%$/.test(value)) {\r\n        return '%';\r\n    }\r\n\r\n    return 'px';\r\n\r\n}\r\n\r\nfunction toValue(value) {\r\n    value = parseFloat(value);\r\n    return isNaN(value) ? 0 : value;\r\n}\r\n\r\nexport default class WidthInputField extends React.Component {\r\n\r\n    static getDerivedStateFromProps(props, state) {\r\n\r\n        if ('value' in props) {\r\n            return {\r\n                value: toValue(props.value),\r\n                unit: getUnit(props.value)\r\n            }\r\n        }\r\n\r\n    }\r\n\r\n    constructor(props, ...a) {\r\n        super(props, ...a);\r\n\r\n        const value = props.defaultValue || '';\r\n        this.state = {\r\n            value: toValue(value),\r\n            unit: getUnit(value),\r\n        }\r\n\r\n    }\r\n\r\n    renderSuffix() {\r\n        const { unit } = this.state;\r\n\r\n        return (\r\n            <div className=\"width-suffix\">\r\n                <div className=\"width-suffix-text\">\r\n                    <span>{unit}</span>\r\n                    <div className=\"width-suffix-unit\">\r\n                        <div className=\"width-suffix-unit-item\" onClick={this.onUnitChange.bind(this, 'px')}>px</div>\r\n                        <div className=\"width-suffix-unit-item\" onClick={this.onUnitChange.bind(this, '%')}>%</div>\r\n                    </div>\r\n                </div>\r\n                <Icon type=\"caret-down\" />\r\n            </div>\r\n        );\r\n    }\r\n\r\n    onUnitChange(unit) {\r\n        const props = this.props;\r\n        let { value } = this.state;\r\n\r\n        if (unit === '%') {\r\n            value = Math.max(Math.min(value, 100), 0);\r\n        }\r\n\r\n        if (!('value' in props)) {\r\n            this.setState({\r\n                unit,\r\n                value\r\n            });\r\n        }\r\n\r\n        props.onChange && props.onChange(value + unit);\r\n    }\r\n\r\n    handleInputChange = e => {\r\n        const { unit } = this.state;\r\n        const props = this.props;\r\n\r\n        let value = toValue(e.target.value);\r\n\r\n        if (unit === '%') {\r\n            value = Math.max(Math.min(value, 100), 0);\r\n        }\r\n\r\n        if (!('value' in props)) {\r\n            this.setState({\r\n                value\r\n            });\r\n        }\r\n\r\n        const v = (value + unit);\r\n\r\n        props.onChange && props.onChange(v);\r\n    }\r\n\r\n    render() {\r\n        const { value } = this.state;\r\n\r\n        return (\r\n            <div className=\"width-input-field\">\r\n                <input\r\n                    onChange={this.handleInputChange}\r\n                    value={value}\r\n                />\r\n                {\r\n                    this.renderSuffix()\r\n                }\r\n            </div>\r\n        );\r\n    }\r\n}","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAxklEQVRYR+2WXRHCMBCE9xwgAQfgAOrgogALSAAHOOk6AByAExwskw7w0FKGTmlaZnLvl+/L5tcwctnIfGSBnEBOYDoJuPsBwCLVvUCyiKxXAiGEE4BVKoGyLCv2O4GzpCgzRM3NbBMHbhWQtCe5G4Lu7mszO34t8GiQpCvJW1+pzgIhBEWopIJk72XJAjmBv0yg2vmStiQvyY9hX2C9v/MSjCLwa2jbeJ8eoyQODQF3XwKYJaEDeF7t0/kRpZp5nZMTyAncAYM54iEqZrwtAAAAAElFTkSuQmCC\"","import PropertyPanel from './PropertyPanel';\r\n\r\nimport data from '../common/data';\r\nimport icon from './icon.png';\r\n\r\nconst XType = 'EX_TEXTAREA_FIELD';\r\nconst Title = '多行文本';\r\n\r\nexport default {\r\n    xtype: \"EX_TEXTAREA_FIELD\",\r\n    title: \"多行文本\",\r\n    icon: icon,\r\n    WidgetProperty: PropertyPanel,\r\n\r\n    data() {\r\n        return {\r\n            ...data(),\r\n            xtype: XType,\r\n            title: Title,\r\n            height: '70'\r\n        }\r\n    }\r\n};","import React from 'react';\r\nimport {\r\n    FormItem,\r\n    NativeField,\r\n} from 'components/Form';\r\n\r\nimport PropertyForm from '../PropertyForm';\r\n\r\nimport CommonPropertyPanel from '../common/CommonPropertyPanel';\r\nimport ValidatePropertyPanel from '../common/ValidatePropertyPanel';\r\n\r\nexport default function (props) {\r\n\r\n    return (\r\n        <PropertyForm {...props}>\r\n            <CommonPropertyPanel />\r\n            <FormItem\r\n                className=\"design-property-field\"\r\n                label=\"高度\"\r\n                name=\"height\"\r\n            >\r\n                <NativeField\r\n                    component=\"input\"\r\n                />\r\n            </FormItem>\r\n            <ValidatePropertyPanel />\r\n        </PropertyForm>\r\n    );\r\n}","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAv0lEQVRYR+2W4QnCMBBGXzfpJuoG3cBuYEdwFN3EbtARHKEbKB80UDFIhGuOwgX6r+R7eXdpr8F5Nc75BEAYWBs4AodKTXkHnspaA1yBAZg2htAhT8AjByALerZcr90AdIum2VhHsYGPFw0hAiAM7MeArl+6ioaXgGIDbfpeW6ZDOYBxLj1w8wJQsIzqP1NcAisDCj8DowdACtdhXAByFn+W4FJhIFEfZAeSGsNIMqLSfI1kVk331z4xlocBdwNvGE5RIQon4uUAAAAASUVORK5CYII=\"","import PropertyPanel from './PropertyPanel';\r\n\r\nimport data from '../common/data';\r\nimport icon from './icon.png';\r\n\r\nconst XType = 'EX_SELECT_FIELD';\r\nconst Title = '单选列表';\r\n\r\nexport default {\r\n    xtype: XType,\r\n    title: Title,\r\n    icon: icon,\r\n    WidgetProperty: PropertyPanel,\r\n\r\n    data() {\r\n        return {\r\n            ...data(),\r\n            xtype: XType,\r\n            title: Title,\r\n            data: [\r\n                {\r\n                    value: '选项1',\r\n                    label: '选项1',\r\n                },\r\n                {\r\n                    value: '选项2',\r\n                    label: '选项2',\r\n                },\r\n                {\r\n                    value: '选项3',\r\n                    label: '选项3',\r\n                }\r\n            ]\r\n        }\r\n    }\r\n};\r\n","import React from 'react';\r\nimport {\r\n    FormItem,\r\n    NativeField,\r\n} from 'components/Form';\r\nimport {\r\n    MultipleInputField,\r\n} from 'components/FormField';\r\n\r\nimport PropertyForm from '../PropertyForm';\r\n\r\nimport CommonPropertyPanel from '../common/CommonPropertyPanel';\r\nimport ValidatePropertyPanel from '../common/ValidatePropertyPanel';\r\n\r\nexport default function (props) {\r\n\r\n    return (\r\n        <PropertyForm {...props}>\r\n            <CommonPropertyPanel />\r\n            <FormItem\r\n                className=\"design-property-field\"\r\n                label=\"选项值\"\r\n                name=\"data\"\r\n            >\r\n                <MultipleInputField />\r\n            </FormItem>\r\n            <ValidatePropertyPanel />\r\n        </PropertyForm>\r\n    );\r\n}","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAA0UlEQVRYR+2WURHCMBBE9xSAAyzgAHCQOKiESgAlgIKuBCSAA3CAg2XCUKZ0ypQPkv7cfaYz2deXm1wME5dNnA8HcANvAzHGK4BFqaaUtCO57QKoVHib0zSNDQHcACQbuWoJYJY2HwSQtCF5ypUeY0x7rxzADWQxEEIIZtb0G1jSkWSV1rM3YQihMrN9B+IiaU3yXgQghXQgPsKLAbwgagCH9s9bI9mPYOwCc4BfDKRBlHUYmdn86z0wdob//N6fhgTwJCtRks4ka38TugE34AYe7FjWIZhHzn8AAAAASUVORK5CYII=\"","import data from '../common/data';\r\nimport PropertyPanel from './PropertyPanel';\r\nimport icon from './icon.png';\r\n\r\nconst XType = 'EX_TEXT_FIELD';\r\nconst Title = '文本';\r\n\r\nexport default {\r\n    xtype: \"EX_URL_FIELD\",\r\n    title: \"URL\",\r\n    icon: icon,\r\n    WidgetProperty: PropertyPanel,\r\n\r\n    data() {\r\n        return {\r\n            ...data(),\r\n            xtype: XType,\r\n            title: Title,\r\n        }\r\n    }\r\n};","import React from 'react';\r\nimport PropertyForm from '../PropertyForm';\r\n\r\nimport CommonPropertyPanel from '../common/CommonPropertyPanel';\r\nimport ValidatePropertyPanel from '../common/ValidatePropertyPanel';\r\n\r\nexport default function (props) {\r\n\r\n    return (\r\n        <PropertyForm {...props}>\r\n            <CommonPropertyPanel />\r\n            <ValidatePropertyPanel />\r\n        </PropertyForm>\r\n    );\r\n}","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAxklEQVRYR+2WXRHCMBCE9xwgAQfgAOrgogALSAAHOOk6AByAExwskw7w0FKGTmlaZnLvl+/L5tcwctnIfGSBnEBOYDoJuPsBwCLVvUCyiKxXAiGEE4BVKoGyLCv2O4GzpCgzRM3NbBMHbhWQtCe5G4Lu7mszO34t8GiQpCvJW1+pzgIhBEWopIJk72XJAjmBv0yg2vmStiQvyY9hX2C9v/MSjCLwa2jbeJ8eoyQODQF3XwKYJaEDeF7t0/kRpZp5nZMTyAncAYM54iEqZrwtAAAAAElFTkSuQmCC\"","import PropertyPanel from './PropertyPanel';\r\nimport Preview from './Preview';\r\nimport data from '../common/data';\r\nimport icon from './icon.png';\r\n\r\nconst XType = 'EX_DETAILED_FIELD';\r\nconst Title = '明细';\r\n\r\nexport default {\r\n    xtype: XType,\r\n    title: Title,\r\n    icon: icon,\r\n    WidgetProperty: PropertyPanel,\r\n    Preview: Preview,\r\n    data() {\r\n        return {\r\n            ...data(),\r\n            xtype: XType,\r\n            title: Title,\r\n        }\r\n    }\r\n};","import React from 'react';\r\n\r\nimport PropertyForm from '../PropertyForm';\r\n\r\nimport CommonPropertyPanel from '../common/CommonPropertyPanel';\r\nimport ValidatePropertyPanel from '../common/ValidatePropertyPanel';\r\n\r\nexport default function (props) {\r\n\r\n    return (\r\n        <PropertyForm {...props}>\r\n            <CommonPropertyPanel />\r\n            <ValidatePropertyPanel />\r\n        </PropertyForm>\r\n    );\r\n}","import React from 'react';\r\nimport classNames from 'classnames';\r\nimport WidgetDropAccepter from '../../../src/panels/DesignPanel/WidgetDropAccepter';\r\nimport \"./Preview.scss\"\r\n\r\nexport default function (props) {\r\n    const item = props.item;\r\n    const designer = props.designer;\r\n    const classString = classNames({\r\n        // 'widget-preview-item-inner': true,\r\n        'widget-preview-item-detailed': true,\r\n        [props.className]: props.className\r\n    });\r\n    const items = designer.getItems(item.fieldId);\r\n    console.log(item.fieldId, items, designer.getAllItems(), 'xxx')\r\n\r\n    return (\r\n        <div\r\n            className={classString}\r\n        >\r\n            <label className=\"widget-preview-detailed-sub\">{item.title}</label>\r\n            <div className=\"widget-preview-detailed-list\">\r\n                <WidgetDropAccepter\r\n                    items={items}\r\n                    pid={item.fieldId}\r\n                />\r\n            </div>\r\n        </div>\r\n    )\r\n}","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAv0lEQVRYR+2W4QnCMBBGXzfpJuoG3cBuYEdwFN3EbtARHKEbKB80UDFIhGuOwgX6r+R7eXdpr8F5Nc75BEAYWBs4AodKTXkHnspaA1yBAZg2htAhT8AjByALerZcr90AdIum2VhHsYGPFw0hAiAM7MeArl+6ioaXgGIDbfpeW6ZDOYBxLj1w8wJQsIzqP1NcAisDCj8DowdACtdhXAByFn+W4FJhIFEfZAeSGsNIMqLSfI1kVk331z4xlocBdwNvGE5RIQon4uUAAAAASUVORK5CYII=\"","import \"./index.scss\";","import { uuid } from '../../utils';\r\n\r\nexport default () => {\r\n    return {\r\n        fieldId: uuid(),\r\n        fieldName: 'field_' + uuid(),\r\n        placeholder: \"请输入\",\r\n        dataType: 'varchar',\r\n        dataLength: '255',\r\n        required: '0',\r\n        defaultValue: '',\r\n        width: '100%',\r\n    }\r\n}","import React from 'react';\r\nimport {\r\n    Form,\r\n    FormItem,\r\n    NativeField,\r\n} from 'components/Form';\r\n\r\nimport 'components/Form/style/index.scss';\r\n\r\nexport default class PropertyPanel extends React.Component {\r\n\r\n    render() {\r\n        const { item, onChange, children } = this.props;\r\n\r\n        return (\r\n            <Form\r\n                onChange={onChange}\r\n                formValue={item}\r\n                labelWidth={60}\r\n            >\r\n                {children}\r\n            </Form>\r\n        );\r\n    }\r\n}","import React from 'react';\r\nimport {\r\n    FormItem,\r\n    NativeField,\r\n} from 'components/Form';\r\nimport 'components/Form/style/index.scss';\r\nimport {\r\n    MultipleInputField,\r\n    DisplayField,\r\n    WidthInputField\r\n} from 'components/FormField';\r\nimport SingleCheck from 'components/HTMLForm/SingleCheck';\r\n\r\nexport default function () {\r\n\r\n    return (\r\n        <div>\r\n            <div className=\"property-header-title\">基础属性</div>\r\n            <FormItem\r\n                className=\"design-property-field\"\r\n                label=\"控件ID\"\r\n                name=\"fieldId\"\r\n            >\r\n                <DisplayField />\r\n            </FormItem>\r\n            {/* <FormItem\r\n                className=\"design-property-field\"\r\n                label=\"字段名称\"\r\n                name=\"titlex\"\r\n            >\r\n                <MultipleInputField />\r\n            </FormItem> */}\r\n            <FormItem\r\n                className=\"design-property-field\"\r\n                label=\"字段名称\"\r\n                name=\"title\"\r\n            >\r\n                <NativeField\r\n                    component=\"input\"\r\n                />\r\n            </FormItem>\r\n            <FormItem\r\n                className=\"design-property-field\"\r\n                label=\"提示文本\"\r\n                name=\"placeholder\"\r\n            >\r\n                <NativeField\r\n                    component=\"input\"\r\n                />\r\n            </FormItem>\r\n            <FormItem\r\n                className=\"design-property-field\"\r\n                label=\"默认值\"\r\n                name=\"defaultValue\"\r\n            >\r\n                <NativeField\r\n                    component=\"input\"\r\n                />\r\n            </FormItem>\r\n            {/* <FormItem\r\n                className=\"design-property-field\"\r\n                label=\"宽度\"\r\n                name=\"width\"\r\n            >\r\n                <WidthInputField />\r\n            </FormItem> */}\r\n            {/* <FormItem\r\n                className=\"design-property-field\"\r\n                label=\"必填\"\r\n                name=\"required\"\r\n            >\r\n                <SingleCheck\r\n                    on=\"1\"\r\n                    off=\"0\"\r\n                />\r\n            </FormItem> */}\r\n        </div >\r\n    );\r\n}","import React from 'react';\r\nimport {\r\n    FormItem,\r\n    NativeField,\r\n} from 'components/Form';\r\nimport 'components/Form/style/index.scss';\r\nimport {\r\n    MultipleInputField,\r\n    DisplayField,\r\n    WidthInputField\r\n} from 'components/FormField';\r\nimport SingleCheck from 'components/HTMLForm/SingleCheck';\r\n\r\nexport default function () {\r\n\r\n    return (\r\n        <div>\r\n            <div className=\"property-header-title\">输入校验</div>\r\n            <FormItem\r\n                className=\"design-property-field\"\r\n                label=\"必填\"\r\n                name=\"required\"\r\n            >\r\n                <SingleCheck\r\n                    on=\"1\"\r\n                    off=\"0\"\r\n                />\r\n            </FormItem>\r\n        </div >\r\n    );\r\n}","\r\n//设计平台\r\nconst P_PC = 1;\r\nconst P_MOBILE = 2;\r\nconst P_IPAD = 3;\r\n\r\nconst WIDGET_DRAG_DROP_SCOPE = '__WIDGET_DRAG_DROP_SCOPE__';\r\n\r\nexport {\r\n    P_PC,\r\n    P_MOBILE,\r\n    P_IPAD,\r\n    WIDGET_DRAG_DROP_SCOPE,\r\n}\r\n\r\n"],"sourceRoot":""}
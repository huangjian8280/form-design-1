{"version":3,"sources":["webpack:///./demo/components/FormField/index.js","webpack:///./src/panels/DesignPanel/WidgetDropAccepter.js","webpack:///./demo/components/Form/FormContext.js","webpack:///./demo/components/Icon/index.js","webpack:///./demo/components/HTMLForm/SingleCheck.js","webpack:///./demo/index.js","webpack:///./src/index.js","webpack:///./src/Designer.js","webpack:///./src/DesignModel/index.js","webpack:///./src/DesignModel/Widget/index.js","webpack:///./src/DesignModel/Widget/Preview.js","webpack:///./src/DesignModel/Widget/DragPreview.js","webpack:///./src/DesignModel/Widget/PlaceholderPreview.js","webpack:///./src/DesignModel/Widget/WidgetProperty.js","webpack:///./src/DesignContext.js","webpack:///./demo/components/Form/index.js","webpack:///./src/panels/WidgetsPanel/index.js","webpack:///./src/panels/WidgetsPanel/WidgetItem.js","webpack:///./src/panels/PropertyPanel.js","webpack:///./src/panels/DesignPanel/index.js","webpack:///./src/panels/DesignPanel/PreviewItem.js","webpack:///./src/panels/DesignPanel/canDrop.js","webpack:///./demo/widgets/index.js","webpack:///./demo/widgets/TextField/index.js","webpack:///./demo/utils/index.js","webpack:///./demo/widgets/TextField/PropertyPanel.js","webpack:///./demo/components/Form/Form.js","webpack:///./demo/components/Form/FormItem.js","webpack:///./demo/components/Form/NativeField.js","webpack:///./demo/components/FormField/MultipleInputField.js","webpack:///./demo/components/FormField/DisplayField.js","webpack:///./demo/components/FormField/WidthInputField.js","webpack:///./demo/widgets/TextField/icon.png","webpack:///./demo/widgets/TextareaField/index.js","webpack:///./demo/widgets/TextareaField/PropertyPanel.js","webpack:///./demo/widgets/TextareaField/icon.png","webpack:///./demo/widgets/SelectField/index.js","webpack:///./demo/widgets/SelectField/PropertyPanel.js","webpack:///./demo/widgets/SelectField/icon.png","webpack:///./demo/widgets/URLField/index.js","webpack:///./demo/widgets/URLField/PropertyPanel.js","webpack:///./demo/widgets/URLField/icon.png","webpack:///./demo/widgets/DetailedField/index.js","webpack:///./demo/widgets/DetailedField/PropertyPanel.js","webpack:///./demo/widgets/DetailedField/Preview.js","webpack:///./demo/widgets/DetailedField/icon.png","webpack:///./src/style/index.js","webpack:///./demo/widgets/common/data.js","webpack:///./demo/widgets/PropertyForm.js","webpack:///./demo/widgets/common/CommonPropertyPanel.js","webpack:///./demo/widgets/common/ValidatePropertyPanel.js","webpack:///./src/constants.js"],"names":["__webpack_require__","_MultipleInputField","_interopRequireDefault","_DisplayField","_WidthInputField","_react","_reactDnd","_classnames","_constants","_DesignContext","_PreviewItem","spec","canDrop","props","monitor","hover","component","isOver","shallow","designer","context","dragItem","getItem","pid","dragItemFieldId","item","fieldId","targetPids","getPids","push","indexOf","$pid","updateItemPid","drop","commitItem","WidgetDropAccepter","i","isHover","_this","shouldHide","isTmpItem","xtype","widget","getWidget","default","createElement","key","visible","this","PlaceholderPreview","_this$props","connectDropTarget","items","_this$props$style","style","ref","className","design-layout-container","drag-over","dropable","map","renderItem","React","Component","DesignContext","DropTarget","WIDGET_DRAG_DROP_SCOPE","connect","dropTarget","createContext","_extends2","type","checked","value","on","onChange","e","target","off","_reactDom","_src","_widgets","ReactDOM","render","_React$useState","useState","_React$useState2","_slicedToArray2","metadata","onMetadataChange","position","top","left","right","bottom","widgets","document","getElementById","_reactDndHtml5Backend","_Designer","DragDropContext","HTML5Backend","Designer","_propTypes","_DesignModel","_WidgetsPanel","_PropertyPanel","_DesignPanel","_objectSpread2","_this$props2","platform","handleModelChange","PropTypes","array","oneOf","P_PC","P_MOBILE","P_IPAD","object","_Widget","_find","_findIndex","DesignModel","widgetsMap","activeId","state","concat","setState","arguments","length","undefined","getAllItems","filter","_toConsumableArray2","pids","node","pNode","currentFieldId","idx","getItemIndex","_this2","ret","shouldRemove","oIdx","splice","bItem","prevItem","newItems","__tmp__","bind","getWidgets","setActiveId","getActiveId","getActiveItem","addItem","updateItem","getItems","removeItem","insertBefore","insertAfter","clearTmpItems","children","Provider","getModel","w","Widget","_reactIs","_Preview","_DragPreview","_PlaceholderPreview","_WidgetProperty","options","_classCallCheck2","$$widget","title","icon","Preview","isValidElementType","WPreview","DragPreview","WDragPreview","WPlaceholderPreview","WidgetProperty","WWidgetProperty","data","name","classString","_defineProperty2","widget-preview-item-inner","placeholder","_ref","_Form","_FormItem","_NativeField","Form","Item","FormItem","NativeField","_WidgetItem","WidgetsPanel","beginDrag","console","log","endDrag","WidgetItem","disabled","connectDragSource","isDragging","_widget$title","widget-item","widget-item-dragging","widget-item-disabled","src","DragSource","dragSource","PropertyPanel","activeItem","padding","textAlign","onItemChange","_WidgetDropAccepter","DesignPanel","_flow","_canDrop","dropSpec","dragOffset","getClientOffset","previewDOM","findDOMNode","targetOffset","querySelector","getBoundingClientRect","middleY","height","y","didDrop","WidgetPreviewItem","isDefaultPrevented","preventDefault","isWidgetDragging","widget-preview-item-wrapper","droppable","dragging","display","width","widget-preview-item","widget-preview-item-selected","onClick","handlePreviewClick","handleRemove","isPreviewDragging","targetFieldId","_TextField","_TextareaField","_SelectField","_URLField","_DetailedField","TextField","TextareaField","SelectField","URLField","DetailedField","_data2","_icon","Math","random","toString","slice","_PropertyForm","_CommonPropertyPanel","_ValidatePropertyPanel","_asyncValidator","_set","_get","_scrollIntoView","_FormContext","AsyncValidator","warning","formError","validatingFields","formValue","formDefaultValue","field","fields","path2obj","event","cb","nextFormValue","_objectSpread5","_valiateCb","validateProcess","forEach","errors","fieldRules","fieldProps","rules","validator","_isArray","required","unshift","apply","_this$state","getValue","getFieldRules","descriptor","validate","firstFields","message","Function","callback","_this3","_keys","error","_this4","f","getDOM","set","form","prefixCls","onSubmit","getFormContext","nextProps","prevState","string","bool","validateDelay","number","validateTrigger","oneOfType","func","labelWidth","labelPosition","alignItems","inline","validateFieldsAndScroll","showMessage","getFormItemInputProps","_classnames2","dom","_dom","addField","removeField","isRequired","some","rule","getValidateTrigger","getValidateDelay","_validateTimer","clearTimeout","setTimeout","validateField","setValue","formProps","normalize","label","labelFor","help","_this$getLabelProps","getLabelProps","getError","validating","isValidatingField","Children","only","_children$props","onBlur","getInputProps","onFieldChange","onFieldBlur","InputComponent","cloneElement","saveDOM","htmlFor","FormContext","_props$component","inputRef","others","_objectWithoutProperties2","_Icon","MultipleInputField","defaultValue","sIndex","_assertThisInitialized2","onAddItem","onRemoveItem","index","text","max","getUnit","test","toValue","_parseFloat2","isNaN","WidthInputField","_getPrototypeOf2","_len","a","Array","_key","_possibleConstructorReturn2","_getPrototypeOf3","call","unit","min","v","onUnitChange","handleInputChange","renderSuffix","module","exports","_FormField","XType","widget-preview-item-detailed","minHeight","paddingBottom","border","_utils","uuid","fieldName","dataType","dataLength","DisplayField","_SingleCheck"],"mappings":"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","file":"js/index.23076ac3.chunk.js","sourcesContent":["import \"./style/index.scss\"\r\n\r\nimport MultipleInputField from './MultipleInputField';\r\nimport DisplayField from './DisplayField';\r\nimport WidthInputField from './WidthInputField';\r\n\r\nexport {\r\n    MultipleInputField,\r\n    DisplayField,\r\n    WidthInputField,\r\n}","import React from 'react';\r\nimport {\r\n    DragSource,\r\n    DropTarget,\r\n} from 'react-dnd';\r\nimport cx from 'classnames';\r\nimport {\r\n    WIDGET_DRAG_DROP_SCOPE\r\n} from '../../constants';\r\nimport DesignContext from '../../DesignContext';\r\n\r\nimport PreviewItem from './PreviewItem';\r\n\r\nfunction canDrop(props, monitor, component) {\r\n    const isOver = monitor.isOver({ shallow: true });\r\n    if (!isOver) return false;\r\n    //子容器拖动过程中不再接受释放处理\r\n    const designer = component.context;\r\n    const dragItem = monitor.getItem();\r\n    const pid = props.pid;\r\n    const dragItemFieldId = dragItem.item.fieldId;\r\n    const targetPids = pid ? designer.getPids(pid) : [];\r\n    pid && targetPids.push(pid);\r\n    // console.log(targetPids, dragItemFieldId, 'canDrop1')\r\n    //解决父节点拖动到子节点的情况\r\n    return targetPids.indexOf(dragItemFieldId) === -1;\r\n}\r\n\r\nconst spec = {\r\n    canDrop(props, monitor) {\r\n        return true;\r\n        // const dragItem = monitor.getItem();\r\n        // return dragItem.isWidgetDragging;\r\n    },\r\n    hover(props, monitor, component) {\r\n        if (!monitor.canDrop() || !canDrop(props, monitor, component)) return;\r\n        const isOver = monitor.isOver({ shallow: true });\r\n        if (isOver) {\r\n            const designer = component.context;\r\n            const pid = props.pid;\r\n            const dragItem = monitor.getItem();\r\n            const item = dragItem.item;\r\n\r\n            if (pid !== item.$pid) {\r\n                designer.updateItemPid(item, pid);\r\n            }\r\n        }\r\n    },\r\n    drop(props, monitor, component) {\r\n        const dragItem = monitor.getItem();\r\n        const designer = component.context;\r\n        //根节点统一commit\r\n        // monitor.canDrop() &&\r\n        if (props.pid == null) {\r\n            designer.commitItem(dragItem.item);\r\n        }\r\n\r\n        // if (monitor.didDrop() || !canDrop(props, monitor, component)) {\r\n        //     return;\r\n        // }\r\n\r\n        // const dragItem = monitor.getItem();\r\n        // const designer = component.context;\r\n        // console.log('drop', props.pid);\r\n        // designer.commitItem(dragItem.item, props.pid)\r\n\r\n    }\r\n};\r\n\r\nconst collect = (connect, monitor) => {\r\n    return {\r\n        connectDropTarget: connect.dropTarget(),\r\n        isHover: monitor.isOver(),\r\n        isOver: monitor.isOver({ shallow: true }),\r\n        canDrop: monitor.canDrop(),\r\n        dragItem: monitor.getItem(),\r\n    }\r\n}\r\n\r\nclass WidgetDropAccepter extends React.Component {\r\n\r\n    static contextType = DesignContext;\r\n\r\n    static defaultProps = {\r\n        pid: null,\r\n    }\r\n\r\n    rendrePlaceholder() {\r\n        const { dragItem } = this.props;\r\n        const { widget, item } = dragItem\r\n\r\n        return (\r\n            <widget.PlaceholderPreview widget={widget} item={item} />\r\n        );\r\n    }\r\n\r\n    renderItem = (item, i) => {\r\n        const { isHover } = this.props;\r\n        const designer = this.context;\r\n        const shouldHide = !isHover && designer.isTmpItem(item)\r\n\r\n        const xtype = item.xtype;\r\n        const widget = designer.getWidget(xtype);\r\n\r\n        return (\r\n            <PreviewItem\r\n                designer={designer}\r\n                key={item.fieldId}\r\n                widget={widget}\r\n                item={item}\r\n                visible={!shouldHide}\r\n            />\r\n        )\r\n    }\r\n\r\n    // connectDropTarget = (dom) => {\r\n    //     const { connectDropTarget, pid } = this.props;\r\n    //     const designer = this.context;\r\n\r\n    //     if (pid) {\r\n    //         const pItem = designer.getItem(pid);\r\n    //         if (!designer.isTmpItem(pItem)) {\r\n    //             connectDropTarget(dom);\r\n    //         } else {\r\n    //             const tmpDOM = document.createElement('div');\r\n    //             connectDropTarget(tmpDOM);\r\n    //             console.log('x')\r\n    //         }\r\n    //     } else {\r\n    //         connectDropTarget(dom);\r\n    //     }\r\n    // }\r\n\r\n    render() {\r\n        const { connectDropTarget, isOver, canDrop, dragItem, items, style = {} } = this.props;\r\n        // const designer = this.context;\r\n        // const items = designer.getItems(pid);\r\n\r\n        return (\r\n            <div\r\n                ref={connectDropTarget}\r\n                style={style}\r\n                className={cx({\r\n                    \"design-layout-container\": true,\r\n                    \"drag-over\": isOver,\r\n                    \"dropable\": canDrop,\r\n                })}>\r\n                {\r\n                    items.map(this.renderItem)\r\n                }\r\n                {/* {\r\n                    isOver && dragItem.isWidgetDragging ? this.rendrePlaceholder() : null\r\n                } */}\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nexport default DropTarget(WIDGET_DRAG_DROP_SCOPE, spec, collect)(WidgetDropAccepter);","import React from 'react';\r\n\r\nexport default React.createContext({});\r\n","import React from 'react';\r\nimport classNames from 'classnames';\r\n\r\nexport default (props) => {\r\n\r\n    return <span {...props} className={\r\n        classNames(props.className, 'icon-' + props.type)\r\n    } />\r\n}","import React from 'react';\r\nimport { FormItem, NativeField } from '../Form'\r\nimport classNames from 'classnames';\r\n\r\nexport default function Checkbox(props) {\r\n\r\n    const onChange = (e) => {\r\n        const target = e.target;\r\n        if (target.checked) {\r\n            props.onChange && props.onChange(props.on);\r\n        } else {\r\n            props.onChange && props.onChange(props.off);\r\n        }\r\n    }\r\n\r\n\r\n    return (\r\n        <input\r\n            {...props}\r\n            checked={props.value === props.on}\r\n            type=\"checkbox\"\r\n            onChange={onChange}\r\n        />\r\n    );\r\n}","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\n\r\nimport FormDesigner from '../src';\r\n\r\nimport widgets from './widgets';\r\n\r\nimport '../src/style';\r\n\r\nfunction App() {\r\n    const [metadata, onMetadataChange] = React.useState({\r\n        items: []\r\n    })\r\n\r\n    return (\r\n        <div style={{\r\n            position: 'fixed',\r\n            top: 0,\r\n            left: 0,\r\n            right: 0,\r\n            bottom: 0,\r\n        }}>\r\n            <FormDesigner\r\n                widgets={widgets}\r\n                metadata={metadata}\r\n                onChange={onMetadataChange}\r\n            />\r\n        </div>\r\n    );\r\n}\r\n\r\nReactDOM.render(<App />, document.getElementById('root'))","import { DragDropContext } from 'react-dnd'\r\nimport HTML5Backend from 'react-dnd-html5-backend'\r\nimport Designer from './Designer';\r\n\r\nexport default DragDropContext(HTML5Backend)(Designer);","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\n\r\nimport DesignModel from './DesignModel';\r\nimport WidgetsPanel from './panels/WidgetsPanel';\r\nimport PropertyPanel from './panels/PropertyPanel';\r\nimport DesignPanel from './panels/DesignPanel';\r\n\r\nimport {\r\n    P_PC,\r\n    P_MOBILE,\r\n    P_IPAD,\r\n} from './constants';\r\n\r\nexport default class Designer extends React.Component {\r\n    static propTypes = {\r\n        widgets: PropTypes.array,\r\n        platform: PropTypes.oneOf([P_PC, P_MOBILE, P_IPAD]),\r\n        metadata: PropTypes.object,\r\n    }\r\n\r\n    static defaultProps = {\r\n        onChange: null,\r\n        platform: P_PC,\r\n        widgets: [],\r\n        metadata: {\r\n            items: [],\r\n        }\r\n    }\r\n\r\n    handleModelChange = (items) => {\r\n        const { onChange, metadata } = this.props;\r\n\r\n        onChange && onChange({\r\n            ...metadata,\r\n            items,\r\n        })\r\n    }\r\n\r\n    render() {\r\n        const { widgets, metadata, platform } = this.props;\r\n\r\n        return (\r\n            <DesignModel\r\n                widgets={widgets}\r\n                items={metadata.items}\r\n                platform={platform}\r\n                onChange={this.handleModelChange}\r\n            >\r\n                <div className=\"csos-form-designer\">\r\n                    <div className=\"csos-form-designer-container\">\r\n                        <WidgetsPanel />\r\n                        <DesignPanel />\r\n                        <PropertyPanel />\r\n                    </div>\r\n                </div>\r\n            </DesignModel>\r\n        )\r\n    }\r\n}","import React from 'react';\r\nimport DesignContext from '../DesignContext';\r\nimport Widget from './Widget';\r\n\r\nimport find from 'lodash/find';\r\nimport findIndex from 'lodash/findIndex';\r\n\r\nexport default class DesignModel extends React.Component {\r\n    static getDerivedStateFromProps(props, state) {\r\n\r\n        const widgetsMap = {};\r\n        const widgets = props.widgets.map(widget => {\r\n            const w = new Widget(widget);\r\n            widgetsMap[widget.xtype] = w;\r\n            return w;\r\n        });\r\n\r\n        return {\r\n            widgets,\r\n            widgetsMap,\r\n            items: props.items || [],\r\n        }\r\n    }\r\n\r\n    static defaultProps = {\r\n        onChange: null,\r\n        widgets: [],\r\n        items: [],\r\n    }\r\n\r\n    state = {\r\n        widgets: [],\r\n        widgetsMap: {},\r\n        items: [],\r\n        activeId: null\r\n    }\r\n\r\n    onChange(items) {\r\n        const props = this.props;\r\n        const { onChange } = props;\r\n\r\n        if (onChange) {\r\n            onChange(items);\r\n        }\r\n    }\r\n\r\n    getWidget(xtype) {\r\n        const { widgetsMap } = this.state;\r\n        return widgetsMap[xtype] || null;\r\n    }\r\n\r\n    getWidgets() {\r\n        const { widgets } = this.state;\r\n        return [].concat(widgets);\r\n    }\r\n\r\n    setActiveId(activeId) {\r\n        this.setState({\r\n            activeId\r\n        });\r\n    }\r\n\r\n    getActiveId() {\r\n        return this.state.activeId;\r\n    }\r\n\r\n    getActiveItem() {\r\n        const activeId = this.state.activeId;\r\n        return this.getItem(activeId) || null;\r\n    }\r\n\r\n    getItems(pid = null) {\r\n        const items = this.getAllItems();\r\n        return items.filter(item => item.$pid == pid);\r\n    }\r\n\r\n    getAllItems() {\r\n        return [...this.state.items];\r\n    }\r\n\r\n    //获取组件的所有父级ID\r\n    getPids(fieldId) {\r\n        const pids = [];\r\n        let node = this.getItem(fieldId);\r\n        if (!node.$pid) return pids;\r\n\r\n        let currentFieldId = node.$pid;\r\n        let pNode;\r\n        while (pNode = this.getItem(currentFieldId)) {\r\n            pids.push(pNode.fieldId);\r\n            currentFieldId = pNode.$pid;\r\n            if (!currentFieldId) break;\r\n        }\r\n\r\n        return pids;\r\n    }\r\n\r\n    updateItem(item) {\r\n        const items = this.getAllItems();\r\n        const fieldId = item.fieldId;\r\n        const idx = this.getItemIndex(fieldId);\r\n\r\n        if (idx !== -1) {\r\n            items[idx] = item;\r\n        }\r\n\r\n        this.onChange(items);\r\n    }\r\n\r\n    addItem(item, pid = null) {\r\n        const items = this.getAllItems();\r\n\r\n        item.$pid = pid;\r\n\r\n        items.push(item);\r\n\r\n        this.onChange(items);\r\n    }\r\n\r\n    removeItem(fieldId) {\r\n        const items = this.getAllItems();\r\n        //移除指定项目及子项目\r\n        const ret = items.filter(item => {\r\n            let shouldRemove = item.fieldId === fieldId;\r\n\r\n            if (!shouldRemove) {\r\n                const pids = this.getPids(item.fieldId);\r\n                shouldRemove = pids.indexOf(fieldId) > -1;\r\n            }\r\n\r\n            return !shouldRemove;\r\n        });\r\n\r\n        this.onChange(ret);\r\n    }\r\n\r\n    getItemIndex(fieldId) {\r\n        const items = this.getAllItems();\r\n        return findIndex(items, item => item.fieldId === fieldId)\r\n    }\r\n\r\n    getItem(fieldId) {\r\n        const items = this.getAllItems();\r\n        return find(items, item => item.fieldId === fieldId)\r\n    }\r\n\r\n    insertBefore(item, fieldId) {\r\n        const items = this.getAllItems();\r\n\r\n        //判断当前item是否已经存在, 如果存在则先删除\r\n        const oIdx = this.getItemIndex(item.fieldId);\r\n        if (oIdx > -1) {\r\n            items.splice(oIdx, 1);\r\n        }\r\n\r\n        const bItem = this.getItem(fieldId);\r\n        item.$pid = bItem.$pid;\r\n\r\n        //插入操作\r\n        const idx = this.getItemIndex(fieldId);\r\n        items.splice(idx, 0, item);\r\n\r\n        this.onChange(items);\r\n    }\r\n\r\n    insertAfter(item, fieldId) {\r\n        const items = this.getAllItems();\r\n\r\n        //判断当前item是否已经存在, 如果存在则先删除\r\n        const oIdx = this.getItemIndex(item.fieldId);\r\n        if (oIdx > -1) {\r\n            items.splice(oIdx, 1);\r\n        }\r\n\r\n        const prevItem = this.getItem(fieldId);\r\n        item.$pid = prevItem.$pid;\r\n\r\n        //插入操作 之前有删除操作, 要重新查找index\r\n        const idx = findIndex(items, item => item.fieldId === fieldId);\r\n        items.splice(idx, 1, items[idx], item);\r\n\r\n        this.onChange(items);\r\n    }\r\n\r\n    clearTmpItems() {\r\n        const items = this.getAllItems();\r\n        const newItems = items.filter(item => !item.__tmp__);\r\n\r\n        this.onChange(newItems);\r\n    }\r\n\r\n    updateItemPid(item, pid = null) {\r\n        const items = this.getAllItems();\r\n        const fieldId = item.fieldId;\r\n        const idx = this.getItemIndex(fieldId);\r\n\r\n        if (idx !== -1) {\r\n            item.$pid = pid;\r\n            items[idx] = item;\r\n        }\r\n\r\n        this.onChange(items);\r\n    }\r\n\r\n    commitItem(item) {\r\n        const items = this.getAllItems();\r\n        const fieldId = item.fieldId;\r\n        const idx = this.getItemIndex(fieldId);\r\n\r\n        if (idx !== -1) {\r\n            item.__tmp__ = false;\r\n            delete item.__tmp__;\r\n            items[idx] = item;\r\n        }\r\n\r\n        this.onChange(items);\r\n    }\r\n\r\n    isTmpItem(item) {\r\n        return !!item.__tmp__;\r\n    }\r\n\r\n    getModel() {\r\n        return {\r\n            //   isWidget: this.isWidget.bind(this),\r\n            getWidget: this.getWidget.bind(this),\r\n            getWidgets: this.getWidgets.bind(this),\r\n            setActiveId: this.setActiveId.bind(this),\r\n            getActiveId: this.getActiveId.bind(this),\r\n            getActiveItem: this.getActiveItem.bind(this),\r\n            addItem: this.addItem.bind(this),\r\n            getPids: this.getPids.bind(this),\r\n            updateItem: this.updateItem.bind(this),\r\n            getItems: this.getItems.bind(this),\r\n            getAllItems: this.getAllItems.bind(this),\r\n            removeItem: this.removeItem.bind(this),\r\n            getItemIndex: this.getItemIndex.bind(this),\r\n            getItem: this.getItem.bind(this),\r\n            insertBefore: this.insertBefore.bind(this),\r\n            insertAfter: this.insertAfter.bind(this),\r\n            clearTmpItems: this.clearTmpItems.bind(this),\r\n            commitItem: this.commitItem.bind(this),\r\n            isTmpItem: this.isTmpItem.bind(this),\r\n            updateItemPid: this.updateItemPid.bind(this),\r\n\r\n        };\r\n    }\r\n\r\n    render() {\r\n        const { children } = this.props;\r\n        return (\r\n            <DesignContext.Provider value={this.getModel()}>\r\n                {children}\r\n            </DesignContext.Provider>\r\n        )\r\n    }\r\n}","\r\nimport React from 'react';\r\nimport { isValidElementType } from 'react-is';\r\nimport WPreview from './Preview';\r\nimport WDragPreview from './DragPreview';\r\nimport WPlaceholderPreview from './PlaceholderPreview';\r\nimport WWidgetProperty from './WidgetProperty';\r\n\r\nexport default class Widget {\r\n    /**\r\n         *\r\n         * @param {object} options 控件基本信息: 名称 图标 属性面板组件 预览组件 属性等\r\n         * @param {string} optopns.xtype 控件ID\r\n         * @param {string} optopns.title 控件名称\r\n         * @param {string} optopns.icon  控件图标\r\n         * @param {ReactElementType} optopns.Preview  控件拖放后预览组件\r\n         * @param {ReactElementType} optopns.DragPreview  控件拖拽时预览组件\r\n         * @param {ReactElementType} optopns.PlaceholderPreview  控件拖拽时占位预览组件\r\n         * @param {ReactElementType} optopns.WidgetProperty  控件属性面板组件\r\n         * @param {function|object} optopns.data 控件属性\r\n         * @memberof WidgetManager\r\n         */\r\n    constructor(options = {}) {\r\n        this.$$widget = true;\r\n        this.options = options;\r\n\r\n        this.xtype = options.xtype;\r\n        this.title = options.title;\r\n        this.icon = options.icon;\r\n\r\n        this.Preview = isValidElementType(options.Preview) ? options.Preview : WPreview;\r\n        this.DragPreview = isValidElementType(options.DragPreview) ? options.DragPreview : WDragPreview;\r\n        this.PlaceholderPreview = isValidElementType(options.PlaceholderPreview) ? options.PlaceholderPreview : WPlaceholderPreview;\r\n        this.WidgetProperty = isValidElementType(options.WidgetProperty) ? options.WidgetProperty : WWidgetProperty;\r\n\r\n    }\r\n\r\n    getItem() {\r\n        const data = this.options.data;\r\n        const ret = typeof data === 'function' ? data() : data;\r\n\r\n        return {\r\n            ...ret,\r\n            xtype: this.xtype,\r\n            __tmp__: true,\r\n            $pid: null,\r\n        }\r\n    }\r\n\r\n    get(name) {\r\n        return this.options[name];\r\n    }\r\n\r\n    set(name, value) {\r\n        this.options[name] = value;\r\n\r\n        return this;\r\n    }\r\n\r\n}","import React from 'react';\r\nimport classNames from 'classnames';\r\n\r\nexport default function (props) {\r\n    const item = props.item;\r\n    const classString = classNames({\r\n        'widget-preview-item-inner': true,\r\n        [props.className]: props.className\r\n    });\r\n\r\n    return (\r\n        <div\r\n            className={classString}\r\n        >\r\n            <label className=\"widget-preview-title\">{item.title}</label>\r\n            <span className=\"widget-preview-input\">{item.placeholder}</span>\r\n            {/* <span className=\"widget-preview-close\" onClick={onRemove}>x</span> */}\r\n        </div>\r\n    )\r\n}","import React from 'react';\r\n\r\nexport default () => {\r\n    return null;\r\n}","import React from 'react';\r\n\r\nexport default function WidgetPlaceholderItem() {\r\n\r\n    return (\r\n        <div className=\"drag-item-placeholder\">\r\n            <div className=\"drag-item-placeholder-inner\">\r\n            </div>\r\n        </div>\r\n    );\r\n}","import React from 'react';\r\n\r\nexport default ({\r\n    item,\r\n    onChange\r\n}) => {\r\n\r\n    return (\r\n        <div>\r\n            默认属性面板\r\n        </div>\r\n    );\r\n}","import React from 'react';\r\n\r\nexport default React.createContext({});","import Form from './Form';\r\nimport FormItem from './FormItem';\r\nimport NativeField from './NativeField';\r\n\r\nexport {\r\n    Form,\r\n    FormItem,\r\n    NativeField,\r\n};\r\n\r\nForm.Item = FormItem;\r\nForm.NativeField = NativeField;\r\n\r\nexport default Form;","import React from 'react';\r\nimport DesignContext from '../../DesignContext';\r\nimport WidgetItem from './WidgetItem';\r\n\r\nexport default class WidgetsPanel extends React.Component {\r\n\r\n    static contextType = DesignContext;\r\n\r\n    render() {\r\n        const designer = this.context;\r\n        const widgets = designer.getWidgets();\r\n\r\n        return (\r\n            <div className=\"widgets-panel\">\r\n                <div className=\"widgets-panel-header\">\r\n                    控件列表\r\n                </div>\r\n                <div className=\"widgets-panel-body\">\r\n                    {\r\n                        widgets.map(widget => {\r\n                            return (\r\n                                <WidgetItem\r\n                                    designer={designer}\r\n                                    key={widget.xtype}\r\n                                    widget={widget}\r\n                                />\r\n                            );\r\n                        })\r\n                    }\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n}","import React from 'react';\r\nimport {\r\n    DragSource,\r\n    DropTarget,\r\n} from 'react-dnd';\r\nimport cx from 'classnames';\r\nimport {\r\n    WIDGET_DRAG_DROP_SCOPE\r\n} from '../../constants';\r\n\r\nconst spec = {\r\n    beginDrag(props, monitor, component) {\r\n        const designer = props.designer;\r\n        const widget = props.widget;\r\n        const item = widget.getItem();\r\n        designer.addItem(item);\r\n        console.log(item)\r\n\r\n        return {\r\n            // isWidgetDragging: true,\r\n            widget,\r\n            item,\r\n        };\r\n    },\r\n    endDrag(props, monitor, component) {\r\n        const designer = props.designer;\r\n        designer.clearTmpItems();\r\n        console.log('endDrag')\r\n    },\r\n    // canDrag(props) {\r\n    //     return !props.disabled;\r\n    // }\r\n};\r\n\r\nconst collect = (connect, monitor) => {\r\n    return {\r\n        connectDragSource: connect.dragSource(),\r\n        isDragging: monitor.isDragging(),\r\n    };\r\n};\r\n\r\nclass WidgetItem extends React.Component {\r\n\r\n    render() {\r\n        const { disabled, widget, connectDragSource, isDragging } = this.props;\r\n        const { title = \"未知组件\", icon } = widget;\r\n        return connectDragSource(\r\n            <div className={cx({\r\n                \"widget-item\": true,\r\n                \"widget-item-dragging\": isDragging,\r\n                \"widget-item-disabled\": disabled,\r\n            })}>\r\n                <div className=\"widget-item-title\">\r\n                    <img src={icon} />\r\n                    <span className=\"widget-text\">{title}</span>\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nexport default DragSource(WIDGET_DRAG_DROP_SCOPE, spec, collect)(WidgetItem);","import React from 'react';\r\nimport DesignContext from '../DesignContext';\r\n// import { getWidgetPropertyPanel } from './widgets';\r\n// import {\r\n//     Form,\r\n//     FormItem,\r\n//     NativeField,\r\n// } from 'components/Form';\r\n\r\nexport default class PropertyPanel extends React.Component {\r\n\r\n    static contextType = DesignContext;\r\n\r\n    onItemChange = (item) => {\r\n        const designer = this.context;\r\n        const activeItem = designer.getActiveItem();\r\n\r\n        designer.updateItem({\r\n            ...activeItem,\r\n            ...item,\r\n        });\r\n    }\r\n\r\n    render() {\r\n        const designer = this.context;\r\n        const activeItem = designer.getActiveItem();\r\n        if (!activeItem) {\r\n            return (\r\n                <div className=\"property-panel\">\r\n                    <div style={{ padding: 30, textAlign: 'center' }}>请先选择控件</div>\r\n                </div>\r\n            )\r\n        }\r\n\r\n        const widget = designer.getWidget(activeItem.xtype);\r\n\r\n        if (!widget) {\r\n            return (\r\n                <div className=\"property-panel\">\r\n                    <div style={{ padding: 30, textAlign: 'center' }}>无.</div>\r\n                </div>\r\n            );\r\n        }\r\n\r\n        return (\r\n            <div className=\"property-panel\">\r\n                <widget.WidgetProperty\r\n                    widget={widget}\r\n                    onChange={this.onItemChange}\r\n                    item={{ ...activeItem }}\r\n                    key={activeItem.fieldId}\r\n                />\r\n            </div>\r\n        );\r\n    }\r\n}","import React from 'react';\r\nimport DesignContext from '../../DesignContext';\r\nimport WidgetDropAccepter from './WidgetDropAccepter';\r\n\r\nexport default class DesignPanel extends React.Component {\r\n    static contextType = DesignContext;\r\n\r\n    render() {\r\n        const pid = null\r\n        const designer = this.context;\r\n        const items = designer.getItems(pid);\r\n\r\n        return (\r\n            <div className=\"design-panel\">\r\n                <WidgetDropAccepter items={items} pid={pid} />\r\n            </div>\r\n        );\r\n    }\r\n}","import React from 'react';\r\nimport { findDOMNode } from 'react-dom';\r\nimport flow from 'lodash/flow';\r\nimport get from 'lodash/get';\r\nimport {\r\n    DragSource,\r\n    DropTarget,\r\n} from 'react-dnd';\r\nimport cx from 'classnames';\r\nimport {\r\n    WIDGET_DRAG_DROP_SCOPE\r\n} from '../../constants';\r\nimport DesignContext from '../../DesignContext';\r\n\r\nimport canDrop from './canDrop';\r\n\r\nconst dragSpec = {\r\n    beginDrag(props) {\r\n        const widget = props.widget;\r\n        const item = props.item;\r\n        return {\r\n            isWidgetDragging: false,\r\n            isPreviewDragging: false,\r\n            widget: widget,\r\n            item: item,\r\n        };\r\n    },\r\n    // endDrag(props, monitor, component) {\r\n    //     console.log('endDrag')\r\n    // }\r\n};\r\n\r\nconst dragCollect = (connect, monitor) => {\r\n    return {\r\n        connectDragSource: connect.dragSource(),\r\n        isDragging: monitor.isDragging(),\r\n    };\r\n}\r\n\r\n// function canDrop(props, monitor) {\r\n//     const designer = props.designer;\r\n//     const dragItem = monitor.getItem();\r\n//     const dragItemFieldId = dragItem.item.fieldId;\r\n//     const targetFieldId = props.item.fieldId;\r\n//     const pids = designer.getPids(targetFieldId);\r\n//     console.log(targetFieldId, 'pids: ', pids, dragItemFieldId);\r\n//     //解决父节点拖动到子节点的情况\r\n//     if (pids.indexOf(dragItemFieldId) > -1) return false;\r\n\r\n//     return targetFieldId !== dragItemFieldId;\r\n// }\r\n\r\nconst dropSpec = {\r\n    canDrop(props, monitor) {\r\n        return true;\r\n        // const designer = props.designer;\r\n        // const dragItem = monitor.getItem();\r\n        // // if (dragItem.isWidgetDragging) return true;\r\n        // const dragItemFieldId = dragItem.item.fieldId;\r\n        // const targetFieldId = props.item.fieldId; //currentFieldId;\r\n        // const pids = designer.getPids(targetFieldId);\r\n        // console.log(targetFieldId, 'pids: ', pids, dragItemFieldId);\r\n        // //解决父节点拖动到子节点的情况\r\n        // if (pids.indexOf(dragItemFieldId) > -1) return false;\r\n\r\n        // return targetFieldId !== dragItemFieldId;\r\n    },\r\n\r\n    hover(props, monitor, component) {\r\n        if (!canDrop(props, monitor, component)) return;\r\n\r\n        const isOver = monitor.isOver({ shallow: true });\r\n        if (!isOver) return;\r\n\r\n        const designer = component.context;\r\n        const { item } = props;\r\n        const dragItem = monitor.getItem();\r\n        const dragItemFieldId = dragItem.item.fieldId;\r\n        const isSortMode = true;\r\n        const dragOffset = monitor.getClientOffset();\r\n        const previewDOM = findDOMNode(component);\r\n\r\n        if (isSortMode) {\r\n            //顺序调整模式\r\n            if (item.fieldId === dragItemFieldId) {\r\n                return;\r\n            } else {\r\n                // console.log(dragItem.item, item.fieldId, 'crash1')\r\n                const targetOffset = previewDOM.querySelector('.widget-preview-item').getBoundingClientRect();\r\n                const middleY = targetOffset.bottom - (targetOffset.height / 2);\r\n                if (dragOffset.y <= middleY) {\r\n                    designer.insertBefore(dragItem.item, item.fieldId);\r\n                } else {\r\n                    designer.insertAfter(dragItem.item, item.fieldId);\r\n                }\r\n            }\r\n\r\n        }\r\n\r\n    },\r\n\r\n    drop(props, monitor, component) {\r\n        if (monitor.didDrop() || !canDrop(props, monitor, component)) {\r\n            return;\r\n        }\r\n    }\r\n};\r\n\r\nconst dropCollect = (connect, monitor) => {\r\n    return {\r\n        connectDropTarget: connect.dropTarget(),\r\n        isOver: monitor.isOver({ shallow: true }),\r\n        canDrop: monitor.canDrop(),\r\n        dragItem: monitor.getItem(),\r\n    }\r\n}\r\n\r\nclass WidgetPreviewItem extends React.Component {\r\n\r\n    static contextType = DesignContext;\r\n\r\n    state = {\r\n        // placeholderPosition: 'none', //none after before top bottom\r\n    }\r\n\r\n    handlePreviewClick(item, e) {\r\n        if (e.isDefaultPrevented()) {\r\n            return;\r\n        }\r\n        e.preventDefault();\r\n        const designer = this.context;\r\n        designer.setActiveId(item.fieldId);\r\n    }\r\n\r\n    handleRemove = () => {\r\n        const designer = this.context;\r\n        const { item } = this.props;\r\n        designer.removeItem(item.fieldId)\r\n    }\r\n\r\n    render() {\r\n        const {\r\n            connectDropTarget,\r\n            connectDragSource,\r\n            isDragging,\r\n            isOver,\r\n            widget,\r\n            item,\r\n            dragItem,\r\n            visible,\r\n        } = this.props;\r\n        // const { placeholderPosition } = this.state;\r\n        const designer = this.context;\r\n        const activeId = designer.getActiveId();\r\n        //如果来源不是组建面板,则是排序模式\r\n        const isSortMode = dragItem && !dragItem.isWidgetDragging;\r\n        // const items = layout.getLayoutChildren(data.id);\r\n\r\n        return connectDropTarget(\r\n            <div\r\n                className={cx({\r\n                    \"widget-preview-item-wrapper\": true,\r\n                    \"droppable\": isOver,\r\n                    \"dragging\": isDragging,\r\n                    // \"drop-tips\": canDrop,\r\n                })}\r\n\r\n                style={{\r\n                    display: visible ? 'inline-block' : 'none',\r\n                    width: item.width || '100%'\r\n                }}\r\n\r\n            >\r\n                {/* {placeholderPosition === 'top' && isOver && !isSortMode ? <widget.PlaceholderPreview /> : null} */}\r\n                <div\r\n                    ref={connectDragSource}\r\n                    className={cx({\r\n                        \"widget-preview-item\": true,\r\n                        \"widget-preview-item-selected\": activeId === item.fieldId,\r\n                    })}\r\n                    onClick={this.handlePreviewClick.bind(this, item)}\r\n                >\r\n                    <widget.Preview item={item} designer={designer} />\r\n                    <span className=\"widget-preview-close\" onClick={this.handleRemove}>x</span>\r\n                </div>\r\n                {/* {placeholderPosition === 'bottom' && isOver && !isSortMode ? <widget.PlaceholderPreview /> : null} */}\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nexport default flow(\r\n    DropTarget(WIDGET_DRAG_DROP_SCOPE, dropSpec, dropCollect),\r\n    DragSource(WIDGET_DRAG_DROP_SCOPE, dragSpec, dragCollect),\r\n)(WidgetPreviewItem)","export default function canDrop(props, monitor) {\r\n    const designer = props.designer;\r\n    const dragItem = monitor.getItem();\r\n    const dragItemFieldId = dragItem.item.fieldId;\r\n    const targetFieldId = props.item.fieldId;\r\n    const pids = designer.getPids(targetFieldId);\r\n    //解决父节点拖动到子节点的情况\r\n    if (pids.indexOf(dragItemFieldId) > -1) return false;\r\n\r\n    return targetFieldId !== dragItemFieldId;\r\n}","import TextField from './TextField';\r\nimport TextareaField from './TextareaField';\r\nimport SelectField from './SelectField';\r\n// import MultiSelectField from './MultiSelectField';\r\n// import NumberField from './NumberField';\r\n// import DateField from './DateField';\r\nimport URLField from './URLField';\r\n// import FileField from './FileField';\r\nimport DetailedField from './DetailedField';\r\n\r\nexport default [\r\n    TextField,\r\n    TextareaField,\r\n    SelectField,\r\n    // MultiSelectField,\r\n    // NumberField,\r\n    // DateField,\r\n    URLField,\r\n    DetailedField,\r\n    // FileField,\r\n];","import data from '../common/data';\r\nimport PropertyPanel from './PropertyPanel';\r\nimport icon from './icon.png';\r\n\r\nconst XType = 'EX_TEXT_FIELD';\r\nconst Title = '文本';\r\n\r\nexport default {\r\n    xtype: \"EX_TEXT_FIELD\",\r\n    title: \"文本\",\r\n    icon: icon,\r\n    WidgetProperty: PropertyPanel,\r\n\r\n    data() {\r\n        return {\r\n            ...data(),\r\n            xtype: XType,\r\n            title: Title,\r\n        }\r\n    }\r\n};","export function uuid() {\r\n    return Math.random().toString(16).slice(2, 8);\r\n}\r\n","import React from 'react';\r\nimport PropertyForm from '../PropertyForm';\r\n// import {\r\n//     FormItem,\r\n//     NativeField,\r\n// } from 'components/Form';\r\n\r\nimport CommonPropertyPanel from '../common/CommonPropertyPanel';\r\nimport ValidatePropertyPanel from '../common/ValidatePropertyPanel';\r\n\r\nexport default function (props) {\r\n\r\n    return (\r\n        <PropertyForm {...props}>\r\n            <CommonPropertyPanel />\r\n            <ValidatePropertyPanel />\r\n        </PropertyForm>\r\n    );\r\n}","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport classnames from 'classnames';\r\nimport AsyncValidator from 'async-validator';\r\nimport set from 'lodash/set';\r\nimport get from 'lodash/get';\r\nimport scrollIntoView from 'bplokjs-dom-utils/scrollIntoView';\r\nimport FormContext from './FormContext';\r\n\r\nAsyncValidator.warning = function () { };\r\n\r\nexport default class Form extends React.Component {\r\n    static propTypes = {\r\n        prefixCls: PropTypes.string,\r\n        className: PropTypes.string,\r\n        style: PropTypes.object,\r\n        path2obj: PropTypes.bool,\r\n        formDefaultValue: PropTypes.object,\r\n        formValue: PropTypes.object,\r\n        validateDelay: PropTypes.number,\r\n        validateTrigger: PropTypes.string, //change blur none\r\n        component: PropTypes.node,\r\n        rules: PropTypes.oneOfType([PropTypes.object, PropTypes.array, PropTypes.func]),\r\n        labelWidth: PropTypes.oneOfType([PropTypes.string, PropTypes.number]),\r\n        labelPosition: PropTypes.oneOf(['top', 'left', 'right']),\r\n        alignItems: PropTypes.oneOf(['top', 'center', 'bottom']),\r\n        inline: PropTypes.bool,\r\n        onSubmit: PropTypes.func,\r\n        onChange: PropTypes.func,\r\n        validateFieldsAndScroll: PropTypes.bool,\r\n        showMessage: PropTypes.bool,\r\n        getFormItemInputProps: PropTypes.func,\r\n    }\r\n\r\n    static defaultProps = {\r\n        prefixCls: 'rw-form',\r\n        className: '',\r\n        style: {},\r\n        rules: {},\r\n        path2obj: true,\r\n        component: 'form',\r\n        validateDelay: 0,\r\n        validateTrigger: 'none',\r\n        labelPosition: 'left',\r\n        alignItems: \"center\",\r\n        inline: false,\r\n        showMessage: true,\r\n    }\r\n\r\n    static getDerivedStateFromProps(nextProps, prevState) {\r\n        return {\r\n            formValue: nextProps.formValue || prevState.formValue,\r\n        }\r\n    }\r\n\r\n    fields = []\r\n    _valiateCb = []\r\n\r\n    state = {\r\n        formError: {},\r\n        validatingFields: {},\r\n        formValue: this.props.formDefaultValue || {},\r\n    }\r\n\r\n    addField(field) {\r\n        this.fields.push(field);\r\n    }\r\n\r\n    removeField(field) {\r\n        var idx = this.fields.indexOf(field);\r\n        if (idx !== -1) {\r\n            this.fields.splice(idx, 1);\r\n        }\r\n    }\r\n\r\n    getValue(name) {\r\n        const path2obj = this.props.path2obj;\r\n        const formValue = this.state.formValue;\r\n        if (path2obj) {\r\n            return get(formValue, name);\r\n        }\r\n        return formValue[name];\r\n    }\r\n\r\n    setValue(name, value, event, cb) {\r\n        const { path2obj, onChange } = this.props;\r\n        const formValue = this.state.formValue;\r\n\r\n        const nextFormValue = {\r\n            ...formValue\r\n        };\r\n\r\n        if (path2obj) {\r\n            set(nextFormValue, name, value);\r\n        } else {\r\n            nextFormValue[name] = value;\r\n        }\r\n\r\n        if (!('formValue' in this.props)) {\r\n            this.setState({\r\n                formValue: nextFormValue\r\n            });\r\n        }\r\n\r\n        if (onChange) {\r\n            onChange(nextFormValue, event);\r\n        }\r\n\r\n        if (cb) {\r\n            this._valiateCb.push(cb);\r\n        }\r\n\r\n        return this;\r\n    }\r\n\r\n    componentDidUpdate() {\r\n        const formValue = this.state.formValue;\r\n        const validateProcess = this._valiateCb;\r\n        this._valiateCb = [];\r\n        validateProcess.forEach(cb => {\r\n            cb(formValue);\r\n        });\r\n    }\r\n\r\n    componentWillUnmount() {\r\n        this._valiateCb = [];\r\n    }\r\n\r\n    getError(name) {\r\n        const { formError } = this.state;\r\n        if (!arguments.length) return formError;\r\n        return formError[name];\r\n    }\r\n\r\n    cleanErrors() {\r\n        this.setState({\r\n            validatingFields: {},\r\n            formError: {}\r\n        });\r\n    }\r\n\r\n    setErrors(errors) {\r\n        const { formError } = this.state;\r\n        this.setState({\r\n            ...formError,\r\n            ...errors\r\n        });\r\n    }\r\n\r\n    getFieldRules(name) {\r\n        const fieldRules = [];\r\n        this.fields\r\n            .filter(field => field.props.name === name)\r\n            .forEach(field => {\r\n                const fieldProps = field.props;\r\n                let rules = fieldProps.rules || [];\r\n                if (typeof rules === 'function') {\r\n                    rules = [\r\n                        {\r\n                            validator: rules\r\n                        }\r\n                    ]\r\n                } else if (!Array.isArray(rules)) {\r\n                    rules = [rules];\r\n                }\r\n                if (fieldProps.required) {\r\n                    rules.unshift({\r\n                        required: true\r\n                    });\r\n                }\r\n\r\n                fieldRules.push(...rules);\r\n            });\r\n\r\n        let rules = this.props.rules[name] || [];\r\n        if (rules) {\r\n            if (typeof rules === 'function') {\r\n                rules = [\r\n                    {\r\n                        validator: rules\r\n                    }\r\n                ]\r\n            } else if (!Array.isArray(rules)) {\r\n                rules = [rules];\r\n            }\r\n        }\r\n\r\n        return rules ? fieldRules.concat(rules) : fieldRules;\r\n    }\r\n\r\n    isValidatingField(name) {\r\n        const validatingFields = this.state.validatingFields;\r\n        return !!validatingFields[name];\r\n    }\r\n\r\n    validateField(name, cb) {\r\n        const { formError, validatingFields } = this.state;\r\n        const value = this.getValue(name);\r\n        const rules = this.getFieldRules(name);\r\n\r\n        if (!rules || rules.length === 0) {\r\n            if (cb instanceof Function) {\r\n                cb(null, value);\r\n            }\r\n            return;\r\n        }\r\n\r\n        this.setState({\r\n            validatingFields: {\r\n                ...validatingFields,\r\n                [name]: true,\r\n            }\r\n        });\r\n\r\n        const descriptor = { [name]: rules };\r\n        const validator = new AsyncValidator(descriptor);\r\n        const data = { [name]: value };\r\n\r\n        validator.validate(data, { firstFields: true }, errors => {\r\n            this.setState({\r\n                formError: {\r\n                    ...formError,\r\n                    [name]: errors ? errors[0].message : null\r\n                },\r\n                validatingFields: {\r\n                    ...validatingFields,\r\n                    [name]: false,\r\n                },\r\n            }, () => {\r\n                if (cb instanceof Function) {\r\n                    cb(errors, value);\r\n                }\r\n            });\r\n        });\r\n    }\r\n\r\n    validate(callback) {\r\n        const { formValue } = this.state;\r\n        const fields = this.fields;\r\n        const rules = {};\r\n\r\n        if (fields.length === 0 && callback) {\r\n            callback(null, formValue);\r\n            return;\r\n        }\r\n\r\n        fields.forEach(field => {\r\n            const name = field.props.name;\r\n            if (!name || name in rules) return;\r\n            const fieldRules = this.getFieldRules(name);\r\n            if (fieldRules && fieldRules.length) {\r\n                rules[name] = fieldRules;\r\n            }\r\n        });\r\n\r\n        const validatingFields = {};\r\n\r\n        const validator = new AsyncValidator(rules);\r\n        const data = {};\r\n        Object.keys(rules).forEach(key => {\r\n            data[key] = get(formValue, key);\r\n            validatingFields[key] = true;\r\n        });\r\n\r\n        this.setState({\r\n            validatingFields\r\n        });\r\n\r\n        validator.validate(data, { firstFields: true }, errors => {\r\n            const formError = {};\r\n            if (errors) {\r\n                errors.forEach(error => {\r\n                    formError[error.field] = error.message;\r\n                });\r\n            }\r\n            this.setState({\r\n                formError,\r\n                validatingFields: {},\r\n            }, () => {\r\n                if (callback instanceof Function) {\r\n                    callback(errors, formValue);\r\n                }\r\n            });\r\n\r\n        });\r\n    }\r\n\r\n    validateAndScroll(callback) {\r\n        this.validate((errors, formValue) => {\r\n            if (errors) {\r\n                let field;\r\n                const formError = this.state.formError;\r\n                const fields = this.fields;\r\n                fields.forEach(f => {\r\n                    const name = f.props.name;\r\n                    if (!name) return;\r\n                    if (!field && (name in formError)) {\r\n                        field = f;\r\n                    }\r\n                });\r\n\r\n                if (field) {\r\n                    scrollIntoView(field.getDOM());\r\n                }\r\n            }\r\n\r\n            callback(errors, formValue);\r\n        });\r\n    }\r\n\r\n    onFieldChange(name, value) {\r\n        const { formValue } = this.state;\r\n\r\n        formValue.set(name, value);\r\n    }\r\n\r\n    getFormContext() {\r\n        return {\r\n            form: this,\r\n        };\r\n    }\r\n\r\n    render() {\r\n        const {\r\n            prefixCls,\r\n            style,\r\n            className,\r\n            onSubmit,\r\n            component: Component,\r\n            children\r\n        } = this.props;\r\n\r\n        return (\r\n            <FormContext.Provider value={this.getFormContext()}>\r\n                <Component\r\n                    style={style}\r\n                    className={classnames(prefixCls, className)}\r\n                    onSubmit={onSubmit}\r\n                >\r\n                    {typeof children === 'function' ? children(this) : children}\r\n                </Component>\r\n            </FormContext.Provider>\r\n        )\r\n    }\r\n}\r\n\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport classnames from 'classnames';\r\nimport FormContext from './FormContext';\r\nexport default class FormItem extends React.Component {\r\n\r\n    static contextType = FormContext;\r\n\r\n    static propTypes = {\r\n        label: PropTypes.node,\r\n        labelFor: PropTypes.oneOfType([PropTypes.string, PropTypes.number]),\r\n        labelWidth: PropTypes.oneOfType([PropTypes.string, PropTypes.number]),\r\n        labelPosition: PropTypes.oneOf(['top', 'left', 'right']),\r\n        alignItems: PropTypes.oneOf(['top', 'center', 'bottom']),\r\n        name: PropTypes.string,\r\n        rules: PropTypes.oneOfType([PropTypes.object, PropTypes.array, PropTypes.func]),\r\n        required: PropTypes.bool,\r\n        normalize: PropTypes.func,\r\n        validateDelay: PropTypes.number,\r\n        validateTrigger: PropTypes.string, //change blur none\r\n        inline: PropTypes.bool,\r\n        showMessage: PropTypes.bool,\r\n        help: PropTypes.node,\r\n        style: PropTypes.object,\r\n        //extra: PropTypes.node,\r\n    }\r\n\r\n    static defaultProps = {\r\n        prefixCls: 'rw-form-item',\r\n        // labelPosition: 'left',\r\n        // alignItems: \"center\",\r\n        // inline: false,\r\n        //showMessage: true,\r\n    }\r\n\r\n    saveDOM = dom => {\r\n        this._dom = dom;\r\n    }\r\n\r\n    getDOM() {\r\n        return this._dom;\r\n    }\r\n\r\n    componentDidMount() {\r\n        const { form } = this.context;\r\n        const { name } = this.props;\r\n\r\n        if (name) {\r\n            form.addField(this);\r\n        }\r\n    }\r\n\r\n    componentWillUnmount() {\r\n        const { form } = this.context;\r\n        form.removeField(this);\r\n    }\r\n\r\n    isRequired() {\r\n        const { form } = this.context;\r\n        const { name } = this.props;\r\n        let rules = form.getFieldRules(name);\r\n        let isRequired = false;\r\n\r\n        if (rules && rules.length) {\r\n            isRequired = rules.some(rule => rule.required);\r\n        }\r\n\r\n        return isRequired;\r\n    }\r\n\r\n    _validateTimer = null\r\n\r\n    getValidateTrigger() {\r\n        const { form } = this.context;\r\n        const { validateTrigger } = form.props;\r\n        const props = this.props;\r\n\r\n        return 'validateTrigger' in props ? props.validateTrigger : validateTrigger;\r\n    }\r\n\r\n    getValidateDelay() {\r\n        const { form } = this.context;\r\n        const { validateDelay } = form.props;\r\n        const props = this.props;\r\n\r\n        return 'validateDelay' in props ? props.validateDelay : validateDelay;\r\n    }\r\n\r\n    onFieldBlur() {\r\n        const { form } = this.context;\r\n        const validateTrigger = this.getValidateTrigger();\r\n        const validateDelay = this.getValidateDelay();\r\n        const { name } = this.props;\r\n\r\n        if (validateTrigger === 'blur') {\r\n            if (validateDelay > 0) {\r\n                if (this._validateTimer) clearTimeout(this._validateTimer)\r\n                this._validateTimer = setTimeout(() => {\r\n                    form.validateField(name);\r\n                }, validateDelay);\r\n            } else {\r\n                form.validateField(name);\r\n            }\r\n        }\r\n    }\r\n\r\n    getValue() {\r\n        const { name } = this.props;\r\n        const { form } = this.context;\r\n\r\n        return form.getValue(name);\r\n    }\r\n\r\n    onFieldChange(value, e) {\r\n        const { form } = this.context;\r\n        const { name } = this.props;\r\n\r\n        form.setValue(name, value, e, () => {\r\n            const validateTrigger = this.getValidateTrigger();\r\n            const validateDelay = this.getValidateDelay();\r\n\r\n            if (validateTrigger === 'change') {\r\n                if (validateDelay > 0) {\r\n                    if (this._validateTimer) clearTimeout(this._validateTimer)\r\n                    this._validateTimer = setTimeout(() => {\r\n                        form.validateField(name);\r\n                    }, validateDelay);\r\n                } else {\r\n                    form.validateField(name);\r\n                }\r\n            }\r\n        });\r\n\r\n\r\n    }\r\n\r\n    getLabelProps() {\r\n        const { form } = this.context;\r\n        const formProps = form.props;\r\n        const props = this.props;\r\n\r\n        return {\r\n            inline: 'inline' in props ? props.inline : formProps.inline,\r\n            labelPosition: 'labelPosition' in props ? props.labelPosition : formProps.labelPosition,\r\n            labelWidth: 'labelWidth' in props ? props.labelWidth : formProps.labelWidth,\r\n            alignItems: 'alignItems' in props ? props.alignItems : formProps.alignItems,\r\n            showMessage: 'showMessage' in props ? props.showMessage : formProps.showMessage,\r\n        }\r\n    }\r\n\r\n    render() {\r\n        const { form } = this.context;\r\n        const {\r\n            normalize,\r\n            label,\r\n            required,\r\n            labelFor,\r\n            className,\r\n            prefixCls,\r\n            name,\r\n            help,\r\n            style,\r\n            //extra,\r\n        } = this.props;\r\n        const { inline, labelPosition, labelWidth, alignItems, showMessage } = this.getLabelProps();\r\n        const error = form.getError(name);\r\n        const validating = form.isValidatingField(name);\r\n\r\n        const children = React.Children.only(this.props.children);\r\n\r\n        const {\r\n            onChange,\r\n            onBlur\r\n        } = children.props;\r\n\r\n        const getFormItemInputProps = form.props.getInputProps || function () { return {} };\r\n\r\n        const onFieldChange = this.onFieldChange.bind(this);\r\n        const onFieldBlur = this.onFieldBlur.bind(this);\r\n\r\n        const InputComponent = React.cloneElement(children, {\r\n            ...getFormItemInputProps(name),\r\n            value: this.getValue(),\r\n            onChange: function (value, event) {\r\n                if (normalize) {\r\n                    value = normalize(value);\r\n                }\r\n\r\n                onChange && onChange(value, event);\r\n\r\n                onFieldChange(value, event)\r\n            },\r\n            onBlur: function (e) {\r\n                onBlur && onBlur(e);\r\n                onFieldBlur(e)\r\n            },\r\n        });\r\n\r\n        return (\r\n            <div\r\n                style={style}\r\n                ref={this.saveDOM}\r\n                className={classnames(prefixCls, {\r\n                    [`${prefixCls}-inline`]: inline,\r\n                    [`${prefixCls}-position-${labelPosition}`]: labelPosition,\r\n                    [`${prefixCls}-align-items-${alignItems}`]: alignItems !== 'center',\r\n                    [`${prefixCls}-error`]: error,\r\n                    [`${prefixCls}-validating`]: validating,\r\n                    [`${prefixCls}-required`]: this.isRequired() || required,\r\n                    [`${prefixCls}-with-help`]: help,\r\n                    [`${className}`]: className,\r\n                })}\r\n            >\r\n                {\r\n                    label && (\r\n                        <label\r\n                            htmlFor={labelFor}\r\n                            className={`${prefixCls}-label`}\r\n                            style={{\r\n                                width: labelWidth\r\n                            }}\r\n                        >\r\n                            {label}\r\n                        </label>\r\n                    )\r\n                }\r\n                <div className={`${prefixCls}-content`}>\r\n                    {InputComponent}\r\n                    {\r\n                        !help && showMessage && error ? (\r\n                            <div className={`${prefixCls}-error-tip`} >{error}</div>\r\n                        ) : null\r\n                    }\r\n                    {\r\n                        help ? (\r\n                            <div className={`${prefixCls}-help`} >{help}</div>\r\n                        ) : null\r\n                    }\r\n                </div>\r\n            </div>\r\n        )\r\n    }\r\n}","import React from 'react';\r\n\r\nexport default function NativeField(props) {\r\n    const {\r\n        component: Component = 'input',\r\n        value,\r\n        inputRef,\r\n        onChange,\r\n        ...others\r\n    } = props;\r\n\r\n    const onInputChange = (e) => {\r\n        const value = e.target.value;\r\n        onChange && onChange(value, e);\r\n    }\r\n\r\n    return (\r\n        <Component\r\n            ref={inputRef}\r\n            onChange={onInputChange}\r\n            value={value}\r\n            {...others}\r\n        />\r\n    );\r\n}","import React from 'react';\r\n// import { FormItem } from '../Form';\r\nimport Icon from '../Icon';\r\n\r\nexport default class MultipleInputField extends React.Component {\r\n\r\n    static getDerivedStateFromProps(props, state) {\r\n        let value = props.value || state.value;\r\n\r\n        if (!Array.isArray(value)) {\r\n            value = [];\r\n        }\r\n\r\n        if (!value.length) {\r\n            value.push({\r\n                value: '选项1',\r\n                label: '选项1',\r\n            });\r\n        }\r\n\r\n        return {\r\n            value: [...value],\r\n            sIndex: Math.max(value.length, state.sIndex),\r\n        }\r\n    }\r\n    state = {\r\n        value: this.props.defaultValue || [],\r\n        sIndex: 1,\r\n    }\r\n\r\n    onItemChange(index, e) {\r\n        const { onChange } = this.props;\r\n        const { value } = this.state;\r\n        value[index] = {\r\n            value: e.target.value,\r\n            label: e.target.value,\r\n        };\r\n\r\n        onChange && onChange(value);\r\n    }\r\n\r\n    onAddItem(index) {\r\n        const { onChange } = this.props;\r\n        const { value, sIndex } = this.state;\r\n\r\n        const text = '选项' + (1 + sIndex);\r\n\r\n        this.setState({\r\n            sIndex: sIndex + 1,\r\n        });\r\n\r\n        const item = {\r\n            value: text,\r\n            label: text,\r\n        };\r\n\r\n        value.splice(index, 1,\r\n            value[index],\r\n            item\r\n        )\r\n\r\n        onChange && onChange(value);\r\n    }\r\n\r\n    onRemoveItem(index) {\r\n        const { onChange } = this.props;\r\n        const { value } = this.state;\r\n\r\n        if (value.length <= 1) return;\r\n\r\n        value.splice(index, 1)\r\n\r\n        onChange && onChange(value);\r\n    }\r\n\r\n    renderItem = (item, i) => {\r\n\r\n        return (\r\n            <div className=\"multi-input-item\" key={i}>\r\n                <div className=\"multi-input\">\r\n                    <input\r\n                        value={item.label}\r\n                        placeholder=\"选项名称\"\r\n                        onChange={this.onItemChange.bind(this, i)}\r\n                    />\r\n                </div>\r\n                <div className=\"multi-input-tools\">\r\n                    <Icon type=\"add\" onClick={this.onAddItem.bind(this, i)}>+</Icon>\r\n                    <Icon type=\"remove\" onClick={this.onRemoveItem.bind(this, i)}>-</Icon>\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n\r\n    render() {\r\n        const { value } = this.state;\r\n\r\n        return (\r\n            <div className=\"multi-input-wrapper\">\r\n                {\r\n                    value.map(this.renderItem)\r\n                }\r\n            </div>\r\n        );\r\n    }\r\n}","import React from 'react';\r\n\r\nexport default props => {\r\n    return (\r\n        <span>{props.value}</span>\r\n    )\r\n}","import React from 'react';\r\nimport Icon from '../Icon';\r\n\r\nfunction getUnit(value) {\r\n\r\n    if (/px$/.test(value)) {\r\n        return 'px';\r\n    }\r\n\r\n    if (/%$/.test(value)) {\r\n        return '%';\r\n    }\r\n\r\n    return 'px';\r\n\r\n}\r\n\r\nfunction toValue(value) {\r\n    value = parseFloat(value);\r\n    return isNaN(value) ? 0 : value;\r\n}\r\n\r\nexport default class WidthInputField extends React.Component {\r\n\r\n    static getDerivedStateFromProps(props, state) {\r\n\r\n        if ('value' in props) {\r\n            return {\r\n                value: toValue(props.value),\r\n                unit: getUnit(props.value)\r\n            }\r\n        }\r\n\r\n    }\r\n\r\n    constructor(props, ...a) {\r\n        super(props, ...a);\r\n\r\n        const value = props.defaultValue || '';\r\n        this.state = {\r\n            value: toValue(value),\r\n            unit: getUnit(value),\r\n        }\r\n\r\n    }\r\n\r\n    renderSuffix() {\r\n        const { unit } = this.state;\r\n\r\n        return (\r\n            <div className=\"width-suffix\">\r\n                <div className=\"width-suffix-text\">\r\n                    <span>{unit}</span>\r\n                    <div className=\"width-suffix-unit\">\r\n                        <div className=\"width-suffix-unit-item\" onClick={this.onUnitChange.bind(this, 'px')}>px</div>\r\n                        <div className=\"width-suffix-unit-item\" onClick={this.onUnitChange.bind(this, '%')}>%</div>\r\n                    </div>\r\n                </div>\r\n                <Icon type=\"caret-down\" />\r\n            </div>\r\n        );\r\n    }\r\n\r\n    onUnitChange(unit) {\r\n        const props = this.props;\r\n        let { value } = this.state;\r\n\r\n        if (unit === '%') {\r\n            value = Math.max(Math.min(value, 100), 0);\r\n        }\r\n\r\n        if (!('value' in props)) {\r\n            this.setState({\r\n                unit,\r\n                value\r\n            });\r\n        }\r\n\r\n        props.onChange && props.onChange(value + unit);\r\n    }\r\n\r\n    handleInputChange = e => {\r\n        const { unit } = this.state;\r\n        const props = this.props;\r\n\r\n        let value = toValue(e.target.value);\r\n\r\n        if (unit === '%') {\r\n            value = Math.max(Math.min(value, 100), 0);\r\n        }\r\n\r\n        if (!('value' in props)) {\r\n            this.setState({\r\n                value\r\n            });\r\n        }\r\n\r\n        const v = (value + unit);\r\n\r\n        props.onChange && props.onChange(v);\r\n    }\r\n\r\n    render() {\r\n        const { value } = this.state;\r\n\r\n        return (\r\n            <div className=\"width-input-field\">\r\n                <input\r\n                    onChange={this.handleInputChange}\r\n                    value={value}\r\n                />\r\n                {\r\n                    this.renderSuffix()\r\n                }\r\n            </div>\r\n        );\r\n    }\r\n}","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAxklEQVRYR+2WXRHCMBCE9xwgAQfgAOrgogALSAAHOOk6AByAExwskw7w0FKGTmlaZnLvl+/L5tcwctnIfGSBnEBOYDoJuPsBwCLVvUCyiKxXAiGEE4BVKoGyLCv2O4GzpCgzRM3NbBMHbhWQtCe5G4Lu7mszO34t8GiQpCvJW1+pzgIhBEWopIJk72XJAjmBv0yg2vmStiQvyY9hX2C9v/MSjCLwa2jbeJ8eoyQODQF3XwKYJaEDeF7t0/kRpZp5nZMTyAncAYM54iEqZrwtAAAAAElFTkSuQmCC\"","import PropertyPanel from './PropertyPanel';\r\n\r\nimport data from '../common/data';\r\nimport icon from './icon.png';\r\n\r\nconst XType = 'EX_TEXTAREA_FIELD';\r\nconst Title = '多行文本';\r\n\r\nexport default {\r\n    xtype: \"EX_TEXTAREA_FIELD\",\r\n    title: \"多行文本\",\r\n    icon: icon,\r\n    WidgetProperty: PropertyPanel,\r\n\r\n    data() {\r\n        return {\r\n            ...data(),\r\n            xtype: XType,\r\n            title: Title,\r\n            height: '70'\r\n        }\r\n    }\r\n};","import React from 'react';\r\nimport {\r\n    FormItem,\r\n    NativeField,\r\n} from 'components/Form';\r\n\r\nimport PropertyForm from '../PropertyForm';\r\n\r\nimport CommonPropertyPanel from '../common/CommonPropertyPanel';\r\nimport ValidatePropertyPanel from '../common/ValidatePropertyPanel';\r\n\r\nexport default function (props) {\r\n\r\n    return (\r\n        <PropertyForm {...props}>\r\n            <CommonPropertyPanel />\r\n            <FormItem\r\n                className=\"design-property-field\"\r\n                label=\"高度\"\r\n                name=\"height\"\r\n            >\r\n                <NativeField\r\n                    component=\"input\"\r\n                />\r\n            </FormItem>\r\n            <ValidatePropertyPanel />\r\n        </PropertyForm>\r\n    );\r\n}","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAv0lEQVRYR+2W4QnCMBBGXzfpJuoG3cBuYEdwFN3EbtARHKEbKB80UDFIhGuOwgX6r+R7eXdpr8F5Nc75BEAYWBs4AodKTXkHnspaA1yBAZg2htAhT8AjByALerZcr90AdIum2VhHsYGPFw0hAiAM7MeArl+6ioaXgGIDbfpeW6ZDOYBxLj1w8wJQsIzqP1NcAisDCj8DowdACtdhXAByFn+W4FJhIFEfZAeSGsNIMqLSfI1kVk331z4xlocBdwNvGE5RIQon4uUAAAAASUVORK5CYII=\"","import PropertyPanel from './PropertyPanel';\r\n\r\nimport data from '../common/data';\r\nimport icon from './icon.png';\r\n\r\nconst XType = 'EX_SELECT_FIELD';\r\nconst Title = '单选列表';\r\n\r\nexport default {\r\n    xtype: XType,\r\n    title: Title,\r\n    icon: icon,\r\n    WidgetProperty: PropertyPanel,\r\n\r\n    data() {\r\n        return {\r\n            ...data(),\r\n            xtype: XType,\r\n            title: Title,\r\n            data: [\r\n                {\r\n                    value: '选项1',\r\n                    label: '选项1',\r\n                },\r\n                {\r\n                    value: '选项2',\r\n                    label: '选项2',\r\n                },\r\n                {\r\n                    value: '选项3',\r\n                    label: '选项3',\r\n                }\r\n            ]\r\n        }\r\n    }\r\n};\r\n","import React from 'react';\r\nimport {\r\n    FormItem,\r\n    NativeField,\r\n} from 'components/Form';\r\nimport {\r\n    MultipleInputField,\r\n} from 'components/FormField';\r\n\r\nimport PropertyForm from '../PropertyForm';\r\n\r\nimport CommonPropertyPanel from '../common/CommonPropertyPanel';\r\nimport ValidatePropertyPanel from '../common/ValidatePropertyPanel';\r\n\r\nexport default function (props) {\r\n\r\n    return (\r\n        <PropertyForm {...props}>\r\n            <CommonPropertyPanel />\r\n            <FormItem\r\n                className=\"design-property-field\"\r\n                label=\"选项值\"\r\n                name=\"data\"\r\n            >\r\n                <MultipleInputField />\r\n            </FormItem>\r\n            <ValidatePropertyPanel />\r\n        </PropertyForm>\r\n    );\r\n}","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAA0UlEQVRYR+2WURHCMBBE9xSAAyzgAHCQOKiESgAlgIKuBCSAA3CAg2XCUKZ0ypQPkv7cfaYz2deXm1wME5dNnA8HcANvAzHGK4BFqaaUtCO57QKoVHib0zSNDQHcACQbuWoJYJY2HwSQtCF5ypUeY0x7rxzADWQxEEIIZtb0G1jSkWSV1rM3YQihMrN9B+IiaU3yXgQghXQgPsKLAbwgagCH9s9bI9mPYOwCc4BfDKRBlHUYmdn86z0wdob//N6fhgTwJCtRks4ka38TugE34AYe7FjWIZhHzn8AAAAASUVORK5CYII=\"","import data from '../common/data';\r\nimport PropertyPanel from './PropertyPanel';\r\nimport icon from './icon.png';\r\n\r\nconst XType = 'EX_TEXT_FIELD';\r\nconst Title = '文本';\r\n\r\nexport default {\r\n    xtype: \"EX_URL_FIELD\",\r\n    title: \"URL\",\r\n    icon: icon,\r\n    WidgetProperty: PropertyPanel,\r\n\r\n    data() {\r\n        return {\r\n            ...data(),\r\n            xtype: XType,\r\n            title: Title,\r\n        }\r\n    }\r\n};","import React from 'react';\r\nimport PropertyForm from '../PropertyForm';\r\n\r\nimport CommonPropertyPanel from '../common/CommonPropertyPanel';\r\nimport ValidatePropertyPanel from '../common/ValidatePropertyPanel';\r\n\r\nexport default function (props) {\r\n\r\n    return (\r\n        <PropertyForm {...props}>\r\n            <CommonPropertyPanel />\r\n            <ValidatePropertyPanel />\r\n        </PropertyForm>\r\n    );\r\n}","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAxklEQVRYR+2WXRHCMBCE9xwgAQfgAOrgogALSAAHOOk6AByAExwskw7w0FKGTmlaZnLvl+/L5tcwctnIfGSBnEBOYDoJuPsBwCLVvUCyiKxXAiGEE4BVKoGyLCv2O4GzpCgzRM3NbBMHbhWQtCe5G4Lu7mszO34t8GiQpCvJW1+pzgIhBEWopIJk72XJAjmBv0yg2vmStiQvyY9hX2C9v/MSjCLwa2jbeJ8eoyQODQF3XwKYJaEDeF7t0/kRpZp5nZMTyAncAYM54iEqZrwtAAAAAElFTkSuQmCC\"","import PropertyPanel from './PropertyPanel';\r\nimport Preview from './Preview';\r\nimport data from '../common/data';\r\nimport icon from './icon.png';\r\n\r\nconst XType = 'EX_DETAILED_FIELD';\r\nconst Title = '明细';\r\n\r\nexport default {\r\n    xtype: XType,\r\n    title: Title,\r\n    icon: icon,\r\n    WidgetProperty: PropertyPanel,\r\n    Preview: Preview,\r\n    data() {\r\n        return {\r\n            ...data(),\r\n            xtype: XType,\r\n            title: Title,\r\n        }\r\n    }\r\n};","import React from 'react';\r\n\r\nimport PropertyForm from '../PropertyForm';\r\n\r\nimport CommonPropertyPanel from '../common/CommonPropertyPanel';\r\nimport ValidatePropertyPanel from '../common/ValidatePropertyPanel';\r\n\r\nexport default function (props) {\r\n\r\n    return (\r\n        <PropertyForm {...props}>\r\n            <CommonPropertyPanel />\r\n            <ValidatePropertyPanel />\r\n        </PropertyForm>\r\n    );\r\n}","import React from 'react';\r\nimport classNames from 'classnames';\r\nimport WidgetDropAccepter from '../../../src/panels/DesignPanel/WidgetDropAccepter';\r\nimport \"./Preview.scss\"\r\n\r\nexport default function (props) {\r\n    const item = props.item;\r\n    const designer = props.designer;\r\n    const classString = classNames({\r\n        // 'widget-preview-item-inner': true,\r\n        'widget-preview-item-detailed': true,\r\n        [props.className]: props.className\r\n    });\r\n    const items = designer.getItems(item.fieldId);\r\n    console.log(item.fieldId, items, designer.getAllItems(), 'xxx')\r\n\r\n    return (\r\n        <div\r\n            className={classString}\r\n        >\r\n            <label className=\"widget-preview-detailed-sub\">{item.title}</label>\r\n            <div className=\"widget-preview-detailed-list\">\r\n                <WidgetDropAccepter\r\n                    style={{\r\n                        width: 'auto',\r\n                        height: 'auto',\r\n                        minHeight: 150,\r\n                        paddingBottom: 10,\r\n                        border: 'none',\r\n                    }}\r\n                    items={items}\r\n                    pid={item.fieldId}\r\n                />\r\n            </div>\r\n        </div>\r\n    )\r\n}","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAv0lEQVRYR+2W4QnCMBBGXzfpJuoG3cBuYEdwFN3EbtARHKEbKB80UDFIhGuOwgX6r+R7eXdpr8F5Nc75BEAYWBs4AodKTXkHnspaA1yBAZg2htAhT8AjByALerZcr90AdIum2VhHsYGPFw0hAiAM7MeArl+6ioaXgGIDbfpeW6ZDOYBxLj1w8wJQsIzqP1NcAisDCj8DowdACtdhXAByFn+W4FJhIFEfZAeSGsNIMqLSfI1kVk331z4xlocBdwNvGE5RIQon4uUAAAAASUVORK5CYII=\"","import \"./index.scss\";","import { uuid } from '../../utils';\r\n\r\nexport default () => {\r\n    return {\r\n        $pid: null,\r\n        fieldId: uuid(),\r\n        fieldName: 'field_' + uuid(),\r\n        placeholder: \"请输入\",\r\n        dataType: 'varchar',\r\n        dataLength: '255',\r\n        required: '0',\r\n        defaultValue: '',\r\n        width: '100%',\r\n    }\r\n}","import React from 'react';\r\nimport {\r\n    Form,\r\n    FormItem,\r\n    NativeField,\r\n} from 'components/Form';\r\n\r\nimport 'components/Form/style/index.scss';\r\n\r\nexport default class PropertyPanel extends React.Component {\r\n\r\n    render() {\r\n        const { item, onChange, children } = this.props;\r\n\r\n        return (\r\n            <Form\r\n                onChange={onChange}\r\n                formValue={item}\r\n                labelWidth={60}\r\n            >\r\n                {children}\r\n            </Form>\r\n        );\r\n    }\r\n}","import React from 'react';\r\nimport {\r\n    FormItem,\r\n    NativeField,\r\n} from 'components/Form';\r\nimport 'components/Form/style/index.scss';\r\nimport {\r\n    MultipleInputField,\r\n    DisplayField,\r\n    WidthInputField\r\n} from 'components/FormField';\r\nimport SingleCheck from 'components/HTMLForm/SingleCheck';\r\n\r\nexport default function () {\r\n\r\n    return (\r\n        <div>\r\n            <div className=\"property-header-title\">基础属性</div>\r\n            <FormItem\r\n                className=\"design-property-field\"\r\n                label=\"控件ID\"\r\n                name=\"fieldId\"\r\n            >\r\n                <DisplayField />\r\n            </FormItem>\r\n            {/* <FormItem\r\n                className=\"design-property-field\"\r\n                label=\"字段名称\"\r\n                name=\"titlex\"\r\n            >\r\n                <MultipleInputField />\r\n            </FormItem> */}\r\n            <FormItem\r\n                className=\"design-property-field\"\r\n                label=\"字段名称\"\r\n                name=\"title\"\r\n            >\r\n                <NativeField\r\n                    component=\"input\"\r\n                />\r\n            </FormItem>\r\n            <FormItem\r\n                className=\"design-property-field\"\r\n                label=\"提示文本\"\r\n                name=\"placeholder\"\r\n            >\r\n                <NativeField\r\n                    component=\"input\"\r\n                />\r\n            </FormItem>\r\n            <FormItem\r\n                className=\"design-property-field\"\r\n                label=\"默认值\"\r\n                name=\"defaultValue\"\r\n            >\r\n                <NativeField\r\n                    component=\"input\"\r\n                />\r\n            </FormItem>\r\n            {/* <FormItem\r\n                className=\"design-property-field\"\r\n                label=\"宽度\"\r\n                name=\"width\"\r\n            >\r\n                <WidthInputField />\r\n            </FormItem> */}\r\n            {/* <FormItem\r\n                className=\"design-property-field\"\r\n                label=\"必填\"\r\n                name=\"required\"\r\n            >\r\n                <SingleCheck\r\n                    on=\"1\"\r\n                    off=\"0\"\r\n                />\r\n            </FormItem> */}\r\n        </div >\r\n    );\r\n}","import React from 'react';\r\nimport {\r\n    FormItem,\r\n    NativeField,\r\n} from 'components/Form';\r\nimport 'components/Form/style/index.scss';\r\nimport {\r\n    MultipleInputField,\r\n    DisplayField,\r\n    WidthInputField\r\n} from 'components/FormField';\r\nimport SingleCheck from 'components/HTMLForm/SingleCheck';\r\n\r\nexport default function () {\r\n\r\n    return (\r\n        <div>\r\n            <div className=\"property-header-title\">输入校验</div>\r\n            <FormItem\r\n                className=\"design-property-field\"\r\n                label=\"必填\"\r\n                name=\"required\"\r\n            >\r\n                <SingleCheck\r\n                    on=\"1\"\r\n                    off=\"0\"\r\n                />\r\n            </FormItem>\r\n        </div >\r\n    );\r\n}","\r\n//设计平台\r\nconst P_PC = 1;\r\nconst P_MOBILE = 2;\r\nconst P_IPAD = 3;\r\n\r\nconst WIDGET_DRAG_DROP_SCOPE = '__WIDGET_DRAG_DROP_SCOPE__';\r\n\r\nexport {\r\n    P_PC,\r\n    P_MOBILE,\r\n    P_IPAD,\r\n    WIDGET_DRAG_DROP_SCOPE,\r\n}\r\n\r\n"],"sourceRoot":""}